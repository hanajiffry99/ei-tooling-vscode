/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function DBLookup(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#008234" />
        <path
          d="M206.841 521H196.528V491.909H206.926C209.852 491.909 212.371 492.491 214.483 493.656C216.595 494.812 218.219 496.473 219.355 498.642C220.501 500.811 221.074 503.405 221.074 506.426C221.074 509.456 220.501 512.061 219.355 514.239C218.219 516.417 216.585 518.088 214.455 519.253C212.333 520.418 209.795 521 206.841 521ZM202.679 515.73H206.585C208.403 515.73 209.933 515.408 211.173 514.764C212.423 514.111 213.361 513.102 213.986 511.739C214.62 510.366 214.938 508.595 214.938 506.426C214.938 504.277 214.62 502.52 213.986 501.156C213.361 499.793 212.428 498.789 211.188 498.145C209.947 497.501 208.418 497.179 206.599 497.179H202.679V515.73ZM225.63 521V491.909H237.278C239.418 491.909 241.203 492.226 242.633 492.861C244.063 493.495 245.138 494.376 245.857 495.503C246.577 496.62 246.937 497.908 246.937 499.366C246.937 500.503 246.71 501.502 246.255 502.364C245.8 503.216 245.175 503.917 244.38 504.466C243.594 505.006 242.694 505.389 241.681 505.616V505.901C242.789 505.948 243.826 506.26 244.792 506.838C245.767 507.416 246.558 508.225 247.164 509.267C247.77 510.299 248.073 511.53 248.073 512.96C248.073 514.504 247.69 515.882 246.923 517.094C246.165 518.296 245.043 519.248 243.556 519.949C242.069 520.65 240.237 521 238.059 521H225.63ZM231.781 515.972H236.795C238.509 515.972 239.759 515.645 240.545 514.991C241.331 514.329 241.724 513.448 241.724 512.349C241.724 511.545 241.53 510.834 241.141 510.219C240.753 509.603 240.199 509.12 239.479 508.77C238.769 508.42 237.922 508.244 236.937 508.244H231.781V515.972ZM231.781 504.082H236.34C237.183 504.082 237.931 503.936 238.585 503.642C239.247 503.339 239.768 502.913 240.147 502.364C240.535 501.814 240.729 501.156 240.729 500.389C240.729 499.338 240.355 498.491 239.607 497.847C238.869 497.203 237.817 496.881 236.454 496.881H231.781V504.082ZM261.333 521V491.909H267.484V515.929H279.955V521H261.333ZM293.773 521.426C291.566 521.426 289.658 520.957 288.048 520.02C286.448 519.073 285.212 517.757 284.341 516.071C283.47 514.376 283.034 512.411 283.034 510.176C283.034 507.922 283.47 505.953 284.341 504.267C285.212 502.572 286.448 501.256 288.048 500.318C289.658 499.371 291.566 498.898 293.773 498.898C295.979 498.898 297.883 499.371 299.483 500.318C301.093 501.256 302.333 502.572 303.205 504.267C304.076 505.953 304.511 507.922 304.511 510.176C304.511 512.411 304.076 514.376 303.205 516.071C302.333 517.757 301.093 519.073 299.483 520.02C297.883 520.957 295.979 521.426 293.773 521.426ZM293.801 516.739C294.805 516.739 295.643 516.455 296.315 515.886C296.988 515.309 297.494 514.523 297.835 513.528C298.186 512.534 298.361 511.402 298.361 510.134C298.361 508.865 298.186 507.733 297.835 506.739C297.494 505.744 296.988 504.958 296.315 504.381C295.643 503.803 294.805 503.514 293.801 503.514C292.788 503.514 291.936 503.803 291.244 504.381C290.563 504.958 290.046 505.744 289.696 506.739C289.355 507.733 289.185 508.865 289.185 510.134C289.185 511.402 289.355 512.534 289.696 513.528C290.046 514.523 290.563 515.309 291.244 515.886C291.936 516.455 292.788 516.739 293.801 516.739ZM318.304 521.426C316.098 521.426 314.189 520.957 312.58 520.02C310.979 519.073 309.743 517.757 308.872 516.071C308.001 514.376 307.565 512.411 307.565 510.176C307.565 507.922 308.001 505.953 308.872 504.267C309.743 502.572 310.979 501.256 312.58 500.318C314.189 499.371 316.098 498.898 318.304 498.898C320.51 498.898 322.414 499.371 324.014 500.318C325.624 501.256 326.865 502.572 327.736 504.267C328.607 505.953 329.043 507.922 329.043 510.176C329.043 512.411 328.607 514.376 327.736 516.071C326.865 517.757 325.624 519.073 324.014 520.02C322.414 520.957 320.51 521.426 318.304 521.426ZM318.332 516.739C319.336 516.739 320.174 516.455 320.847 515.886C321.519 515.309 322.026 514.523 322.366 513.528C322.717 512.534 322.892 511.402 322.892 510.134C322.892 508.865 322.717 507.733 322.366 506.739C322.026 505.744 321.519 504.958 320.847 504.381C320.174 503.803 319.336 503.514 318.332 503.514C317.319 503.514 316.467 503.803 315.776 504.381C315.094 504.958 314.578 505.744 314.227 506.739C313.886 507.733 313.716 508.865 313.716 510.134C313.716 511.402 313.886 512.534 314.227 513.528C314.578 514.523 315.094 515.309 315.776 515.886C316.467 516.455 317.319 516.739 318.332 516.739ZM338.46 514.722L338.474 507.463H339.355L346.344 499.182H353.29L343.901 510.148H342.466L338.46 514.722ZM332.977 521V491.909H339.028V521H332.977ZM346.614 521L340.193 511.497L344.227 507.222L353.702 521H346.614ZM370.25 511.71V499.182H376.301V521H370.491V517.037H370.264C369.772 518.315 368.953 519.343 367.807 520.119C366.67 520.896 365.283 521.284 363.645 521.284C362.187 521.284 360.903 520.953 359.795 520.29C358.688 519.627 357.821 518.685 357.196 517.463C356.58 516.241 356.268 514.778 356.259 513.074V499.182H362.31V511.994C362.319 513.282 362.665 514.3 363.347 515.048C364.028 515.796 364.942 516.17 366.088 516.17C366.817 516.17 367.499 516.005 368.134 515.673C368.768 515.332 369.279 514.83 369.668 514.168C370.065 513.505 370.259 512.686 370.25 511.71ZM381.141 529.182V499.182H387.107V502.847H387.377C387.642 502.259 388.026 501.663 388.528 501.057C389.039 500.441 389.702 499.93 390.516 499.523C391.34 499.106 392.363 498.898 393.585 498.898C395.175 498.898 396.643 499.314 397.988 500.148C399.333 500.972 400.407 502.217 401.212 503.884C402.017 505.541 402.42 507.619 402.42 510.119C402.42 512.553 402.027 514.608 401.241 516.284C400.464 517.951 399.404 519.215 398.059 520.077C396.724 520.929 395.228 521.355 393.57 521.355C392.396 521.355 391.397 521.161 390.573 520.773C389.759 520.384 389.091 519.897 388.57 519.31C388.049 518.713 387.652 518.112 387.377 517.506H387.192V529.182H381.141ZM387.065 510.091C387.065 511.388 387.245 512.52 387.604 513.486C387.964 514.452 388.485 515.205 389.167 515.744C389.849 516.275 390.677 516.54 391.653 516.54C392.638 516.54 393.471 516.27 394.153 515.73C394.835 515.181 395.351 514.423 395.701 513.457C396.061 512.482 396.241 511.36 396.241 510.091C396.241 508.831 396.066 507.723 395.715 506.767C395.365 505.811 394.849 505.062 394.167 504.523C393.485 503.983 392.647 503.713 391.653 503.713C390.668 503.713 389.835 503.973 389.153 504.494C388.48 505.015 387.964 505.754 387.604 506.71C387.245 507.667 387.065 508.794 387.065 510.091Z"
          fill="white"
        />
        <path
          d="M266.643 362.421C226.663 359.575 204.755 343.855 204.755 338.285V310.683C218.742 317.491 235.699 322.071 254.265 324.299C254.265 316.129 254.76 307.837 256.864 299.791C235.699 297.068 216.761 290.756 204.755 281.968V247.187C222.455 257.212 248.076 263.649 276.792 264.02C277.163 263.649 277.411 263.154 277.782 262.782C305.013 235.676 347.096 231.962 378.04 252.014V214.51C378.04 187.156 333.729 165 279.02 165C224.312 165 180 187.156 180 214.51V338.285C180 365.64 224.435 387.795 279.02 387.795C283.228 387.795 287.437 387.795 291.398 387.424C286.694 384.33 281.991 380.864 277.782 376.656C273.45 372.2 269.737 367.496 266.643 362.421ZM279.02 189.755C326.921 189.755 353.285 208.321 353.285 214.51C353.285 220.699 326.921 239.265 279.02 239.265C231.119 239.265 204.755 220.699 204.755 214.51C204.755 208.321 231.119 189.755 279.02 189.755ZM381.877 349.425C387.323 340.884 390.418 330.611 390.418 319.719C390.418 288.775 365.663 264.02 334.719 264.02C303.775 264.02 279.02 288.775 279.02 319.719C279.02 350.663 303.775 375.418 334.719 375.418C345.487 375.418 355.637 372.323 364.177 367.001L402.795 405L420 387.795L381.877 349.425ZM334.719 350.663C317.638 350.663 303.775 336.8 303.775 319.719C303.775 302.638 317.638 288.775 334.719 288.775C351.8 288.775 365.663 302.638 365.663 319.719C365.663 336.8 351.8 350.663 334.719 350.663Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
