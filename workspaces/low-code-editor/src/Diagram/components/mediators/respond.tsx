/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Respond(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle id="Ellipse 1" cx="300" cy="300" r="300" fill="#3D84B8" />
        <rect
          id="Rectangle 1"
          x="109"
          y="145"
          width="381"
          height="269"
          rx="37"
          fill="#3D84B8"
          stroke="white"
          stroke-width="6"
        />
        <path
          id="Respond"
          d="M215.528 516V486.909H227.006C229.203 486.909 231.078 487.302 232.631 488.088C234.193 488.865 235.382 489.968 236.196 491.398C237.02 492.818 237.432 494.49 237.432 496.412C237.432 498.344 237.015 500.006 236.182 501.398C235.348 502.78 234.141 503.841 232.56 504.58C230.988 505.318 229.084 505.688 226.849 505.688H219.165V500.744H225.855C227.029 500.744 228.005 500.583 228.781 500.261C229.558 499.939 230.135 499.456 230.514 498.812C230.902 498.169 231.097 497.368 231.097 496.412C231.097 495.446 230.902 494.632 230.514 493.969C230.135 493.306 229.553 492.804 228.767 492.463C227.991 492.113 227.01 491.938 225.827 491.938H221.679V516H215.528ZM231.239 502.761L238.469 516H231.679L224.605 502.761H231.239ZM251.256 516.426C249.012 516.426 247.08 515.972 245.461 515.062C243.851 514.144 242.611 512.847 241.739 511.17C240.868 509.485 240.433 507.491 240.433 505.19C240.433 502.946 240.868 500.976 241.739 499.281C242.611 497.586 243.837 496.265 245.418 495.318C247.009 494.371 248.875 493.898 251.015 493.898C252.454 493.898 253.794 494.13 255.035 494.594C256.285 495.048 257.374 495.735 258.302 496.653C259.239 497.572 259.969 498.727 260.489 500.119C261.01 501.502 261.271 503.121 261.271 504.977V506.639H242.847V502.889H255.575C255.575 502.018 255.385 501.246 255.006 500.574C254.628 499.902 254.102 499.376 253.43 498.997C252.767 498.609 251.995 498.415 251.114 498.415C250.196 498.415 249.381 498.628 248.671 499.054C247.97 499.471 247.421 500.034 247.023 500.744C246.626 501.445 246.422 502.226 246.413 503.088V506.653C246.413 507.733 246.612 508.666 247.009 509.452C247.416 510.238 247.989 510.844 248.728 511.27C249.467 511.696 250.343 511.909 251.356 511.909C252.028 511.909 252.644 511.814 253.202 511.625C253.761 511.436 254.239 511.152 254.637 510.773C255.035 510.394 255.338 509.93 255.546 509.381L261.143 509.75C260.859 511.095 260.276 512.269 259.396 513.273C258.524 514.267 257.397 515.044 256.015 515.602C254.642 516.152 253.056 516.426 251.256 516.426ZM283.373 500.403L277.833 500.744C277.738 500.271 277.535 499.845 277.222 499.466C276.91 499.078 276.498 498.77 275.987 498.543C275.485 498.306 274.883 498.188 274.183 498.188C273.245 498.188 272.454 498.386 271.81 498.784C271.166 499.172 270.844 499.693 270.844 500.347C270.844 500.867 271.053 501.308 271.469 501.668C271.886 502.027 272.601 502.316 273.614 502.534L277.563 503.33C279.684 503.765 281.266 504.466 282.308 505.432C283.349 506.398 283.87 507.667 283.87 509.239C283.87 510.669 283.449 511.923 282.606 513.003C281.772 514.082 280.627 514.925 279.168 515.531C277.719 516.128 276.048 516.426 274.154 516.426C271.266 516.426 268.965 515.825 267.251 514.622C265.546 513.41 264.547 511.762 264.254 509.679L270.205 509.366C270.385 510.247 270.821 510.92 271.512 511.384C272.203 511.838 273.089 512.065 274.168 512.065C275.229 512.065 276.081 511.862 276.725 511.455C277.379 511.038 277.71 510.503 277.719 509.849C277.71 509.3 277.478 508.85 277.023 508.5C276.569 508.14 275.868 507.866 274.921 507.676L271.143 506.923C269.012 506.497 267.426 505.759 266.384 504.707C265.352 503.656 264.836 502.316 264.836 500.688C264.836 499.286 265.215 498.079 265.972 497.065C266.739 496.052 267.814 495.271 269.197 494.722C270.589 494.172 272.218 493.898 274.083 493.898C276.839 493.898 279.007 494.48 280.589 495.645C282.18 496.81 283.108 498.396 283.373 500.403ZM287.68 524.182V494.182H293.646V497.847H293.916C294.181 497.259 294.565 496.663 295.067 496.057C295.578 495.441 296.241 494.93 297.055 494.523C297.879 494.106 298.902 493.898 300.124 493.898C301.714 493.898 303.182 494.314 304.527 495.148C305.872 495.972 306.946 497.217 307.751 498.884C308.556 500.541 308.959 502.619 308.959 505.119C308.959 507.553 308.566 509.608 307.78 511.284C307.003 512.951 305.943 514.215 304.598 515.077C303.263 515.929 301.767 516.355 300.109 516.355C298.935 516.355 297.936 516.161 297.112 515.773C296.298 515.384 295.63 514.897 295.109 514.31C294.589 513.713 294.191 513.112 293.916 512.506H293.732V524.182H287.68ZM293.604 505.091C293.604 506.388 293.784 507.52 294.143 508.486C294.503 509.452 295.024 510.205 295.706 510.744C296.388 511.275 297.216 511.54 298.192 511.54C299.177 511.54 300.01 511.27 300.692 510.73C301.374 510.181 301.89 509.423 302.24 508.457C302.6 507.482 302.78 506.36 302.78 505.091C302.78 503.831 302.605 502.723 302.254 501.767C301.904 500.811 301.388 500.062 300.706 499.523C300.024 498.983 299.186 498.713 298.192 498.713C297.207 498.713 296.374 498.973 295.692 499.494C295.019 500.015 294.503 500.754 294.143 501.71C293.784 502.667 293.604 503.794 293.604 505.091ZM322.851 516.426C320.644 516.426 318.736 515.957 317.126 515.02C315.526 514.073 314.29 512.757 313.419 511.071C312.548 509.376 312.112 507.411 312.112 505.176C312.112 502.922 312.548 500.953 313.419 499.267C314.29 497.572 315.526 496.256 317.126 495.318C318.736 494.371 320.644 493.898 322.851 493.898C325.057 493.898 326.961 494.371 328.561 495.318C330.171 496.256 331.411 497.572 332.283 499.267C333.154 500.953 333.589 502.922 333.589 505.176C333.589 507.411 333.154 509.376 332.283 511.071C331.411 512.757 330.171 514.073 328.561 515.02C326.961 515.957 325.057 516.426 322.851 516.426ZM322.879 511.739C323.883 511.739 324.721 511.455 325.393 510.886C326.066 510.309 326.572 509.523 326.913 508.528C327.264 507.534 327.439 506.402 327.439 505.134C327.439 503.865 327.264 502.733 326.913 501.739C326.572 500.744 326.066 499.958 325.393 499.381C324.721 498.803 323.883 498.514 322.879 498.514C321.866 498.514 321.014 498.803 320.322 499.381C319.641 499.958 319.125 500.744 318.774 501.739C318.433 502.733 318.263 503.865 318.263 505.134C318.263 506.402 318.433 507.534 318.774 508.528C319.125 509.523 319.641 510.309 320.322 510.886C321.014 511.455 321.866 511.739 322.879 511.739ZM343.575 503.386V516H337.524V494.182H343.291V498.031H343.547C344.03 496.762 344.839 495.759 345.976 495.02C347.112 494.272 348.49 493.898 350.109 493.898C351.625 493.898 352.946 494.229 354.072 494.892C355.199 495.555 356.075 496.502 356.7 497.733C357.325 498.955 357.638 500.413 357.638 502.108V516H351.587V503.188C351.596 501.852 351.255 500.811 350.564 500.062C349.873 499.305 348.921 498.926 347.709 498.926C346.894 498.926 346.175 499.101 345.55 499.452C344.934 499.802 344.451 500.313 344.101 500.986C343.76 501.649 343.585 502.449 343.575 503.386ZM370.447 516.355C368.79 516.355 367.289 515.929 365.944 515.077C364.609 514.215 363.548 512.951 362.762 511.284C361.986 509.608 361.597 507.553 361.597 505.119C361.597 502.619 362 500.541 362.805 498.884C363.61 497.217 364.68 495.972 366.015 495.148C367.36 494.314 368.832 493.898 370.433 493.898C371.654 493.898 372.672 494.106 373.487 494.523C374.31 494.93 374.973 495.441 375.475 496.057C375.987 496.663 376.375 497.259 376.64 497.847H376.825V486.909H382.862V516H376.896V512.506H376.64C376.356 513.112 375.953 513.713 375.433 514.31C374.921 514.897 374.254 515.384 373.43 515.773C372.615 516.161 371.621 516.355 370.447 516.355ZM372.364 511.54C373.34 511.54 374.164 511.275 374.836 510.744C375.518 510.205 376.039 509.452 376.398 508.486C376.768 507.52 376.952 506.388 376.952 505.091C376.952 503.794 376.772 502.667 376.413 501.71C376.053 500.754 375.532 500.015 374.85 499.494C374.168 498.973 373.34 498.713 372.364 498.713C371.37 498.713 370.532 498.983 369.85 499.523C369.168 500.062 368.652 500.811 368.302 501.767C367.951 502.723 367.776 503.831 367.776 505.091C367.776 506.36 367.951 507.482 368.302 508.457C368.662 509.423 369.178 510.181 369.85 510.73C370.532 511.27 371.37 511.54 372.364 511.54Z"
          fill="white"
        />
        <path
          id="Vector"
          d="M248 392L171 321.6L248 251.2L267.74 269.248L224.62 308.8H304C339 308.8 367 283.2 367 251.2V168H395V251.2C395 297.152 354.26 334.4 304 334.4H224.62L267.88 373.952L248 392Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
