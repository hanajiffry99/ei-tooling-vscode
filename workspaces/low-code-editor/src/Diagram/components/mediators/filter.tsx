/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";
import { Circle, Square } from "@wso2-ei/low-code-diagram";

interface SquareProps {
  model: Square;
}

export function Filter(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;

  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.tag, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.w}
        height={viewState.bBox.h}
        viewBox="0 0 800 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect width="800" height="600" fill="#1E1E1E" />
        <rect id="Rectangle 2" width="800" height="600" fill="#C0C0C0" />
        <path id="Rectangle 1" d="M10 10H430V590H10V10Z" fill="#357B51" />
        <rect
          id="Rectangle 3"
          x="474"
          y="10"
          width="310"
          height="250"
          fill="#A9A9A9"
        />
        <rect
          id="Rectangle 4"
          x="474"
          y="336"
          width="310"
          height="250"
          fill="#A9A9A9"
        />
        <path
          id="Polygon 1"
          d="M468 471.5L439.5 507.44V435.56L468 471.5Z"
          fill="#71797E"
        />
        <path
          id="Polygon 2"
          d="M468 121.5L439.5 157.44V85.5599L468 121.5Z"
          fill="#71797E"
        />
        <path
          id="Filter"
          d="M163.528 520V490.909H182.79V495.98H169.679V502.912H181.511V507.983H169.679V520H163.528ZM186.813 520V498.182H192.864V520H186.813ZM189.853 495.369C188.953 495.369 188.182 495.071 187.538 494.474C186.903 493.868 186.586 493.144 186.586 492.301C186.586 491.468 186.903 490.753 187.538 490.156C188.182 489.55 188.953 489.247 189.853 489.247C190.753 489.247 191.52 489.55 192.154 490.156C192.798 490.753 193.12 491.468 193.12 492.301C193.12 493.144 192.798 493.868 192.154 494.474C191.52 495.071 190.753 495.369 189.853 495.369ZM203.763 490.909V520H197.712V490.909H203.763ZM220.215 498.182V502.727H207.076V498.182H220.215ZM210.059 492.955H216.11V513.295C216.11 513.854 216.195 514.29 216.366 514.602C216.536 514.905 216.773 515.118 217.076 515.241C217.388 515.365 217.748 515.426 218.156 515.426C218.44 515.426 218.724 515.402 219.008 515.355C219.292 515.298 219.51 515.256 219.661 515.227L220.613 519.73C220.31 519.825 219.884 519.934 219.335 520.057C218.785 520.189 218.118 520.27 217.332 520.298C215.873 520.355 214.595 520.161 213.496 519.716C212.407 519.271 211.56 518.58 210.954 517.642C210.348 516.705 210.049 515.521 210.059 514.091V492.955ZM233.866 520.426C231.621 520.426 229.69 519.972 228.07 519.062C226.46 518.144 225.22 516.847 224.349 515.17C223.478 513.485 223.042 511.491 223.042 509.19C223.042 506.946 223.478 504.976 224.349 503.281C225.22 501.586 226.446 500.265 228.028 499.318C229.619 498.371 231.484 497.898 233.624 497.898C235.064 497.898 236.404 498.13 237.644 498.594C238.894 499.048 239.983 499.735 240.911 500.653C241.849 501.572 242.578 502.727 243.099 504.119C243.62 505.502 243.88 507.121 243.88 508.977V510.639H225.457V506.889H238.184C238.184 506.018 237.995 505.246 237.616 504.574C237.237 503.902 236.711 503.376 236.039 502.997C235.376 502.609 234.604 502.415 233.724 502.415C232.805 502.415 231.991 502.628 231.281 503.054C230.58 503.471 230.031 504.034 229.633 504.744C229.235 505.445 229.031 506.226 229.022 507.088V510.653C229.022 511.733 229.221 512.666 229.619 513.452C230.026 514.238 230.599 514.844 231.337 515.27C232.076 515.696 232.952 515.909 233.965 515.909C234.638 515.909 235.253 515.814 235.812 515.625C236.371 515.436 236.849 515.152 237.246 514.773C237.644 514.394 237.947 513.93 238.156 513.381L243.752 513.75C243.468 515.095 242.886 516.269 242.005 517.273C241.134 518.267 240.007 519.044 238.624 519.602C237.251 520.152 235.665 520.426 233.866 520.426ZM247.829 520V498.182H253.695V501.989H253.923C254.32 500.634 254.988 499.612 255.925 498.92C256.863 498.22 257.942 497.869 259.164 497.869C259.467 497.869 259.794 497.888 260.144 497.926C260.495 497.964 260.802 498.016 261.067 498.082V503.452C260.783 503.366 260.39 503.291 259.888 503.224C259.387 503.158 258.927 503.125 258.511 503.125C257.621 503.125 256.825 503.319 256.124 503.707C255.433 504.086 254.884 504.616 254.477 505.298C254.079 505.98 253.88 506.766 253.88 507.656V520H247.829Z"
          fill="white"
        />
        <path
          id="Else"
          d="M584.523 435V405.909H602.08V409.034H588.045V418.864H601.17V421.989H588.045V431.875H602.307V435H584.523ZM611.327 405.909V435H607.974V405.909H611.327ZM632.921 418.068L629.91 418.92C629.72 418.419 629.441 417.931 629.072 417.457C628.712 416.974 628.219 416.577 627.594 416.264C626.969 415.952 626.169 415.795 625.194 415.795C623.859 415.795 622.746 416.103 621.856 416.719C620.975 417.325 620.535 418.097 620.535 419.034C620.535 419.867 620.838 420.526 621.444 421.009C622.05 421.491 622.997 421.894 624.285 422.216L627.523 423.011C629.474 423.485 630.928 424.209 631.884 425.185C632.841 426.151 633.319 427.396 633.319 428.92C633.319 430.17 632.959 431.288 632.239 432.273C631.529 433.258 630.535 434.034 629.256 434.602C627.978 435.17 626.491 435.455 624.796 435.455C622.571 435.455 620.729 434.972 619.271 434.006C617.812 433.04 616.889 431.629 616.501 429.773L619.683 428.977C619.986 430.152 620.558 431.032 621.401 431.619C622.254 432.206 623.366 432.5 624.739 432.5C626.302 432.5 627.542 432.169 628.461 431.506C629.389 430.833 629.853 430.028 629.853 429.091C629.853 428.333 629.588 427.699 629.058 427.188C628.527 426.667 627.713 426.278 626.614 426.023L622.978 425.17C620.98 424.697 619.512 423.963 618.575 422.969C617.647 421.965 617.183 420.71 617.183 419.205C617.183 417.973 617.528 416.884 618.219 415.938C618.92 414.991 619.872 414.247 621.075 413.707C622.287 413.168 623.66 412.898 625.194 412.898C627.353 412.898 629.048 413.371 630.279 414.318C631.52 415.265 632.4 416.515 632.921 418.068ZM647.513 435.455C645.411 435.455 643.597 434.991 642.072 434.062C640.557 433.125 639.388 431.818 638.564 430.142C637.75 428.456 637.342 426.496 637.342 424.261C637.342 422.027 637.75 420.057 638.564 418.352C639.388 416.638 640.534 415.303 642.001 414.347C643.479 413.381 645.202 412.898 647.172 412.898C648.308 412.898 649.43 413.087 650.538 413.466C651.646 413.845 652.655 414.46 653.564 415.312C654.473 416.155 655.197 417.273 655.737 418.665C656.277 420.057 656.547 421.771 656.547 423.807V425.227H639.729V422.33H653.138C653.138 421.098 652.892 420 652.399 419.034C651.916 418.068 651.225 417.306 650.325 416.747C649.435 416.188 648.384 415.909 647.172 415.909C645.837 415.909 644.681 416.241 643.706 416.903C642.74 417.557 641.997 418.409 641.476 419.46C640.955 420.511 640.695 421.638 640.695 422.841V424.773C640.695 426.42 640.979 427.817 641.547 428.963C642.125 430.099 642.925 430.966 643.947 431.562C644.97 432.15 646.159 432.443 647.513 432.443C648.393 432.443 649.189 432.32 649.899 432.074C650.619 431.818 651.239 431.439 651.76 430.938C652.281 430.426 652.683 429.792 652.967 429.034L656.206 429.943C655.865 431.042 655.292 432.008 654.487 432.841C653.682 433.665 652.688 434.309 651.504 434.773C650.321 435.227 648.99 435.455 647.513 435.455Z"
          fill="black"
        />
        <path
          id="Then"
          d="M582.932 54.0341V50.9091H604.75V54.0341H595.602V80H592.08V54.0341H582.932ZM613.085 66.875V80H609.732V50.9091H613.085V61.5909H613.369C613.88 60.464 614.647 59.5691 615.67 58.9062C616.702 58.2339 618.075 57.8977 619.789 57.8977C621.276 57.8977 622.578 58.196 623.695 58.7926C624.813 59.3797 625.679 60.2841 626.295 61.5057C626.92 62.7178 627.232 64.2614 627.232 66.1364V80H623.88V66.3636C623.88 64.6307 623.43 63.2907 622.531 62.3438C621.64 61.3873 620.405 60.9091 618.823 60.9091C617.725 60.9091 616.74 61.1411 615.869 61.6051C615.007 62.0691 614.325 62.7462 613.823 63.6364C613.331 64.5265 613.085 65.6061 613.085 66.875ZM642.513 80.4545C640.411 80.4545 638.597 79.9905 637.072 79.0625C635.557 78.125 634.388 76.8182 633.564 75.142C632.75 73.4564 632.342 71.4962 632.342 69.2614C632.342 67.0265 632.75 65.0568 633.564 63.3523C634.388 61.6383 635.534 60.303 637.001 59.3466C638.479 58.3807 640.202 57.8977 642.172 57.8977C643.308 57.8977 644.43 58.0871 645.538 58.4659C646.646 58.8447 647.655 59.4602 648.564 60.3125C649.473 61.1553 650.197 62.2727 650.737 63.6648C651.277 65.0568 651.547 66.7708 651.547 68.8068V70.2273H634.729V67.3295H648.138C648.138 66.0985 647.892 65 647.399 64.0341C646.916 63.0682 646.225 62.3059 645.325 61.7472C644.435 61.1884 643.384 60.9091 642.172 60.9091C640.837 60.9091 639.681 61.2405 638.706 61.9034C637.74 62.5568 636.997 63.4091 636.476 64.4602C635.955 65.5114 635.695 66.6383 635.695 67.8409V69.7727C635.695 71.4205 635.979 72.8172 636.547 73.9631C637.125 75.0994 637.925 75.9659 638.947 76.5625C639.97 77.1496 641.159 77.4432 642.513 77.4432C643.393 77.4432 644.189 77.3201 644.899 77.0739C645.619 76.8182 646.239 76.4394 646.76 75.9375C647.281 75.4261 647.683 74.7917 647.967 74.0341L651.206 74.9432C650.865 76.0417 650.292 77.0076 649.487 77.8409C648.682 78.6648 647.688 79.3087 646.504 79.7727C645.321 80.2273 643.99 80.4545 642.513 80.4545ZM659.999 66.875V80H656.646V58.1818H659.885V61.5909H660.169C660.68 60.483 661.457 59.5928 662.499 58.9205C663.54 58.2386 664.885 57.8977 666.533 57.8977C668.01 57.8977 669.303 58.2008 670.411 58.8068C671.518 59.4034 672.38 60.3125 672.996 61.5341C673.611 62.7462 673.919 64.2803 673.919 66.1364V80H670.567V66.3636C670.567 64.6496 670.122 63.3144 669.232 62.358C668.341 61.392 667.12 60.9091 665.567 60.9091C664.497 60.9091 663.54 61.1411 662.697 61.6051C661.864 62.0691 661.206 62.7462 660.723 63.6364C660.24 64.5265 659.999 65.6061 659.999 66.875Z"
          fill="black"
        />
        <path
          id="Vector"
          d="M635 306C628.385 306 623 300.615 623 294C623 287.385 628.385 282 635 282C641.615 282 647 287.385 647 294C647 300.615 641.615 306 635 306ZM635 279C633.03 279 631.08 279.388 629.26 280.142C627.44 280.896 625.786 282.001 624.393 283.393C621.58 286.206 620 290.022 620 294C620 297.978 621.58 301.794 624.393 304.607C625.786 305.999 627.44 307.104 629.26 307.858C631.08 308.612 633.03 309 635 309C638.978 309 642.794 307.42 645.607 304.607C648.42 301.794 650 297.978 650 294C650 292.03 649.612 290.08 648.858 288.26C648.104 286.44 646.999 284.786 645.607 283.393C644.214 282.001 642.56 280.896 640.74 280.142C638.92 279.388 636.97 279 635 279ZM636.5 286.5H633.5V292.5H627.5V295.5H633.5V301.5H636.5V295.5H642.5V292.5H636.5V286.5Z"
          fill="black"
        />
        <path
          id="Vector_2"
          d="M248.056 381.568V381.767L248.082 381.965C248.493 385.048 247.444 388.256 245.209 390.297L245.159 390.342L245.111 390.391C241.14 394.361 234.733 394.361 230.762 390.391L177.889 337.518C175.503 335.132 174.52 331.974 174.916 329.105L174.944 328.901V328.695V261.186V260.153L174.308 259.339L111.15 178.513L111.145 178.506L111.14 178.5C107.716 174.17 108.486 167.769 112.849 164.285C114.93 162.763 117.075 162 119.203 162H303.797C305.925 162 308.07 162.763 310.151 164.285C314.514 167.769 315.284 174.17 311.86 178.5L311.855 178.506L311.85 178.513L248.692 259.339L248.056 260.153V261.186V381.568ZM146.101 182.371H139.943L143.738 187.22L195.315 253.123V324.871V326.114L196.193 326.993L222.564 353.363L227.685 358.485V351.242V252.992L279.26 187.222L283.064 182.371H276.899H146.101Z"
          fill="white"
          stroke="#357B51"
          stroke-width="6"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
