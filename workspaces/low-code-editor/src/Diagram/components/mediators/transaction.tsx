/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";
import { Circle, Square } from "@wso2-ei/low-code-diagram";

interface SquareProps {
  model: Square;
}

export function Transaction(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;

  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.tag, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#008234" />
        <path
          d="M190.42 498.98V493.909H214.312V498.98H205.406V523H199.327V498.98H190.42ZM215.868 523V501.182H221.734V504.989H221.962C222.359 503.634 223.027 502.612 223.964 501.92C224.902 501.22 225.982 500.869 227.203 500.869C227.506 500.869 227.833 500.888 228.183 500.926C228.534 500.964 228.841 501.016 229.107 501.082V506.452C228.822 506.366 228.429 506.291 227.928 506.224C227.426 506.158 226.966 506.125 226.55 506.125C225.66 506.125 224.864 506.319 224.163 506.707C223.472 507.086 222.923 507.616 222.516 508.298C222.118 508.98 221.919 509.766 221.919 510.656V523H215.868ZM237.832 523.412C236.44 523.412 235.199 523.17 234.11 522.688C233.021 522.195 232.159 521.471 231.525 520.514C230.9 519.548 230.587 518.346 230.587 516.906C230.587 515.694 230.81 514.676 231.255 513.852C231.7 513.028 232.306 512.366 233.073 511.864C233.84 511.362 234.711 510.983 235.687 510.727C236.672 510.472 237.704 510.292 238.783 510.188C240.052 510.055 241.075 509.932 241.852 509.818C242.628 509.695 243.192 509.515 243.542 509.278C243.892 509.042 244.067 508.691 244.067 508.227V508.142C244.067 507.242 243.783 506.546 243.215 506.054C242.656 505.562 241.861 505.315 240.829 505.315C239.74 505.315 238.873 505.557 238.229 506.04C237.585 506.513 237.159 507.11 236.951 507.83L231.354 507.375C231.638 506.049 232.197 504.903 233.031 503.938C233.864 502.962 234.939 502.214 236.255 501.693C237.581 501.163 239.115 500.898 240.857 500.898C242.069 500.898 243.229 501.04 244.337 501.324C245.455 501.608 246.444 502.048 247.306 502.645C248.177 503.241 248.864 504.009 249.366 504.946C249.868 505.874 250.119 506.987 250.119 508.284V523H244.38V519.974H244.21C243.859 520.656 243.39 521.258 242.803 521.778C242.216 522.29 241.511 522.692 240.687 522.986C239.863 523.27 238.911 523.412 237.832 523.412ZM239.565 519.236C240.455 519.236 241.241 519.061 241.923 518.71C242.604 518.35 243.139 517.867 243.528 517.261C243.916 516.655 244.11 515.969 244.11 515.202V512.886C243.921 513.009 243.66 513.123 243.329 513.227C243.007 513.322 242.642 513.412 242.235 513.497C241.828 513.573 241.421 513.644 241.013 513.71C240.606 513.767 240.237 513.819 239.906 513.866C239.195 513.971 238.575 514.136 238.045 514.364C237.514 514.591 237.103 514.899 236.809 515.287C236.515 515.666 236.369 516.139 236.369 516.707C236.369 517.531 236.667 518.161 237.263 518.597C237.87 519.023 238.637 519.236 239.565 519.236ZM260.864 510.386V523H254.813V501.182H260.58V505.031H260.836C261.319 503.762 262.129 502.759 263.265 502.02C264.401 501.272 265.779 500.898 267.398 500.898C268.914 500.898 270.235 501.229 271.362 501.892C272.488 502.555 273.364 503.502 273.989 504.733C274.614 505.955 274.927 507.413 274.927 509.108V523H268.876V510.188C268.885 508.852 268.544 507.811 267.853 507.062C267.162 506.305 266.21 505.926 264.998 505.926C264.183 505.926 263.464 506.101 262.839 506.452C262.223 506.802 261.74 507.313 261.39 507.986C261.049 508.649 260.874 509.449 260.864 510.386ZM297.849 507.403L292.31 507.744C292.215 507.271 292.011 506.845 291.699 506.466C291.386 506.078 290.974 505.77 290.463 505.543C289.961 505.306 289.36 505.188 288.659 505.188C287.722 505.188 286.931 505.386 286.287 505.784C285.643 506.172 285.321 506.693 285.321 507.347C285.321 507.867 285.529 508.308 285.946 508.668C286.363 509.027 287.078 509.316 288.091 509.534L292.04 510.33C294.161 510.765 295.742 511.466 296.784 512.432C297.826 513.398 298.347 514.667 298.347 516.239C298.347 517.669 297.925 518.923 297.082 520.003C296.249 521.082 295.103 521.925 293.645 522.531C292.196 523.128 290.525 523.426 288.631 523.426C285.742 523.426 283.441 522.825 281.727 521.622C280.023 520.41 279.024 518.762 278.73 516.679L284.682 516.366C284.862 517.247 285.297 517.92 285.989 518.384C286.68 518.838 287.565 519.065 288.645 519.065C289.705 519.065 290.558 518.862 291.202 518.455C291.855 518.038 292.187 517.503 292.196 516.849C292.187 516.3 291.955 515.85 291.5 515.5C291.045 515.14 290.345 514.866 289.398 514.676L285.619 513.923C283.489 513.497 281.902 512.759 280.861 511.707C279.829 510.656 279.312 509.316 279.312 507.688C279.312 506.286 279.691 505.079 280.449 504.065C281.216 503.052 282.291 502.271 283.673 501.722C285.065 501.172 286.694 500.898 288.56 500.898C291.315 500.898 293.484 501.48 295.065 502.645C296.656 503.81 297.584 505.396 297.849 507.403ZM308.379 523.412C306.987 523.412 305.746 523.17 304.657 522.688C303.568 522.195 302.706 521.471 302.072 520.514C301.447 519.548 301.134 518.346 301.134 516.906C301.134 515.694 301.357 514.676 301.802 513.852C302.247 513.028 302.853 512.366 303.62 511.864C304.387 511.362 305.258 510.983 306.234 510.727C307.219 510.472 308.251 510.292 309.33 510.188C310.599 510.055 311.622 509.932 312.398 509.818C313.175 509.695 313.738 509.515 314.089 509.278C314.439 509.042 314.614 508.691 314.614 508.227V508.142C314.614 507.242 314.33 506.546 313.762 506.054C313.203 505.562 312.408 505.315 311.376 505.315C310.287 505.315 309.42 505.557 308.776 506.04C308.132 506.513 307.706 507.11 307.498 507.83L301.901 507.375C302.185 506.049 302.744 504.903 303.577 503.938C304.411 502.962 305.486 502.214 306.802 501.693C308.128 501.163 309.662 500.898 311.404 500.898C312.616 500.898 313.776 501.04 314.884 501.324C316.002 501.608 316.991 502.048 317.853 502.645C318.724 503.241 319.411 504.009 319.913 504.946C320.415 505.874 320.665 506.987 320.665 508.284V523H314.927V519.974H314.756C314.406 520.656 313.937 521.258 313.35 521.778C312.763 522.29 312.058 522.692 311.234 522.986C310.41 523.27 309.458 523.412 308.379 523.412ZM310.112 519.236C311.002 519.236 311.788 519.061 312.469 518.71C313.151 518.35 313.686 517.867 314.075 517.261C314.463 516.655 314.657 515.969 314.657 515.202V512.886C314.468 513.009 314.207 513.123 313.876 513.227C313.554 513.322 313.189 513.412 312.782 513.497C312.375 513.573 311.968 513.644 311.56 513.71C311.153 513.767 310.784 513.819 310.452 513.866C309.742 513.971 309.122 514.136 308.592 514.364C308.061 514.591 307.649 514.899 307.356 515.287C307.062 515.666 306.915 516.139 306.915 516.707C306.915 517.531 307.214 518.161 307.81 518.597C308.416 519.023 309.183 519.236 310.112 519.236ZM335.218 523.426C332.983 523.426 331.061 522.953 329.451 522.006C327.851 521.049 326.62 519.723 325.758 518.028C324.906 516.333 324.479 514.383 324.479 512.176C324.479 509.941 324.91 507.981 325.772 506.295C326.643 504.6 327.879 503.279 329.479 502.332C331.08 501.376 332.983 500.898 335.19 500.898C337.093 500.898 338.76 501.243 340.19 501.935C341.62 502.626 342.751 503.597 343.585 504.847C344.418 506.097 344.877 507.564 344.962 509.25H339.252C339.091 508.161 338.665 507.285 337.974 506.622C337.292 505.95 336.397 505.614 335.289 505.614C334.352 505.614 333.532 505.869 332.832 506.381C332.14 506.883 331.601 507.616 331.212 508.582C330.824 509.548 330.63 510.718 330.63 512.091C330.63 513.483 330.819 514.667 331.198 515.642C331.586 516.617 332.131 517.361 332.832 517.872C333.532 518.384 334.352 518.639 335.289 518.639C335.98 518.639 336.601 518.497 337.15 518.213C337.709 517.929 338.168 517.517 338.528 516.977C338.897 516.428 339.138 515.77 339.252 515.003H344.962C344.868 516.67 344.413 518.137 343.599 519.406C342.794 520.666 341.681 521.651 340.261 522.361C338.84 523.071 337.159 523.426 335.218 523.426ZM360.442 501.182V505.727H347.303V501.182H360.442ZM350.286 495.955H356.337V516.295C356.337 516.854 356.422 517.29 356.592 517.602C356.763 517.905 357 518.118 357.303 518.241C357.615 518.365 357.975 518.426 358.382 518.426C358.666 518.426 358.95 518.402 359.234 518.355C359.518 518.298 359.736 518.256 359.888 518.227L360.839 522.73C360.536 522.825 360.11 522.934 359.561 523.057C359.012 523.189 358.344 523.27 357.558 523.298C356.1 523.355 354.821 523.161 353.723 522.716C352.634 522.271 351.786 521.58 351.18 520.642C350.574 519.705 350.276 518.521 350.286 517.091V495.955ZM364.384 523V501.182H370.435V523H364.384ZM367.423 498.369C366.524 498.369 365.752 498.071 365.108 497.474C364.473 496.868 364.156 496.144 364.156 495.301C364.156 494.468 364.473 493.753 365.108 493.156C365.752 492.55 366.524 492.247 367.423 492.247C368.323 492.247 369.09 492.55 369.724 493.156C370.368 493.753 370.69 494.468 370.69 495.301C370.69 496.144 370.368 496.868 369.724 497.474C369.09 498.071 368.323 498.369 367.423 498.369ZM385.14 523.426C382.933 523.426 381.025 522.957 379.415 522.02C377.815 521.073 376.579 519.757 375.708 518.071C374.837 516.376 374.401 514.411 374.401 512.176C374.401 509.922 374.837 507.953 375.708 506.267C376.579 504.572 377.815 503.256 379.415 502.318C381.025 501.371 382.933 500.898 385.14 500.898C387.346 500.898 389.25 501.371 390.85 502.318C392.46 503.256 393.701 504.572 394.572 506.267C395.443 507.953 395.879 509.922 395.879 512.176C395.879 514.411 395.443 516.376 394.572 518.071C393.701 519.757 392.46 521.073 390.85 522.02C389.25 522.957 387.346 523.426 385.14 523.426ZM385.168 518.739C386.172 518.739 387.01 518.455 387.683 517.886C388.355 517.309 388.862 516.523 389.202 515.528C389.553 514.534 389.728 513.402 389.728 512.134C389.728 510.865 389.553 509.733 389.202 508.739C388.862 507.744 388.355 506.958 387.683 506.381C387.01 505.803 386.172 505.514 385.168 505.514C384.155 505.514 383.303 505.803 382.612 506.381C381.93 506.958 381.414 507.744 381.063 508.739C380.722 509.733 380.552 510.865 380.552 512.134C380.552 513.402 380.722 514.534 381.063 515.528C381.414 516.523 381.93 517.309 382.612 517.886C383.303 518.455 384.155 518.739 385.168 518.739ZM405.864 510.386V523H399.813V501.182H405.58V505.031H405.836C406.319 503.762 407.129 502.759 408.265 502.02C409.401 501.272 410.779 500.898 412.398 500.898C413.914 500.898 415.235 501.229 416.362 501.892C417.488 502.555 418.364 503.502 418.989 504.733C419.614 505.955 419.927 507.413 419.927 509.108V523H413.876V510.188C413.885 508.852 413.544 507.811 412.853 507.062C412.162 506.305 411.21 505.926 409.998 505.926C409.183 505.926 408.464 506.101 407.839 506.452C407.223 506.802 406.74 507.313 406.39 507.986C406.049 508.649 405.874 509.449 405.864 510.386Z"
          fill="white"
        />
        <path
          d="M425 258.556L369.444 203V244.667H272.222V272.444H369.444V314.111M230.556 286.333L175 341.889L230.556 397.444V355.778H327.778V328H230.556V286.333Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
