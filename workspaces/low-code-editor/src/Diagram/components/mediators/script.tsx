/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Script(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#B97059" />
        <path
          d="M248.887 514.094C248.745 512.662 248.135 511.549 247.058 510.756C245.981 509.963 244.519 509.567 242.673 509.567C241.418 509.567 240.358 509.744 239.494 510.099C238.63 510.443 237.967 510.922 237.506 511.538C237.056 512.153 236.831 512.852 236.831 513.633C236.807 514.284 236.943 514.852 237.239 515.337C237.547 515.823 237.967 516.243 238.5 516.598C239.033 516.941 239.648 517.243 240.347 517.504C241.045 517.752 241.791 517.965 242.584 518.143L245.851 518.924C247.437 519.279 248.893 519.753 250.219 520.344C251.545 520.936 252.693 521.664 253.663 522.528C254.634 523.393 255.386 524.411 255.918 525.582C256.463 526.754 256.741 528.098 256.753 529.613C256.741 531.838 256.173 533.768 255.048 535.401C253.936 537.023 252.326 538.284 250.219 539.183C248.124 540.071 245.596 540.515 242.637 540.515C239.701 540.515 237.145 540.065 234.967 539.165C232.8 538.266 231.108 536.934 229.888 535.17C228.681 533.395 228.048 531.199 227.989 528.583H235.428C235.511 529.802 235.86 530.82 236.476 531.637C237.103 532.442 237.938 533.052 238.979 533.466C240.033 533.868 241.223 534.07 242.548 534.07C243.85 534.07 244.981 533.88 245.94 533.501C246.91 533.123 247.662 532.596 248.195 531.921C248.727 531.246 248.994 530.471 248.994 529.595C248.994 528.778 248.751 528.092 248.266 527.536C247.792 526.979 247.094 526.506 246.17 526.115C245.259 525.724 244.14 525.369 242.815 525.05L238.855 524.055C235.789 523.31 233.369 522.144 231.593 520.558C229.817 518.971 228.936 516.835 228.947 514.148C228.936 511.946 229.522 510.022 230.705 508.377C231.901 506.732 233.54 505.447 235.624 504.524C237.707 503.601 240.074 503.139 242.726 503.139C245.425 503.139 247.78 503.601 249.793 504.524C251.817 505.447 253.391 506.732 254.516 508.377C255.64 510.022 256.22 511.928 256.256 514.094H248.887ZM274.105 540.533C271.311 540.533 268.908 539.941 266.896 538.757C264.895 537.562 263.356 535.904 262.279 533.786C261.214 531.667 260.681 529.228 260.681 526.47C260.681 523.677 261.22 521.226 262.297 519.119C263.386 517 264.931 515.349 266.931 514.165C268.932 512.97 271.311 512.372 274.069 512.372C276.448 512.372 278.532 512.804 280.319 513.668C282.106 514.532 283.521 515.746 284.563 517.308C285.604 518.871 286.178 520.705 286.285 522.812H279.147C278.946 521.451 278.413 520.356 277.549 519.528C276.697 518.687 275.578 518.267 274.193 518.267C273.021 518.267 271.998 518.587 271.122 519.226C270.258 519.853 269.583 520.771 269.097 521.978C268.612 523.185 268.369 524.647 268.369 526.364C268.369 528.104 268.606 529.583 269.08 530.803C269.565 532.022 270.246 532.951 271.122 533.59C271.998 534.229 273.021 534.549 274.193 534.549C275.057 534.549 275.833 534.371 276.519 534.016C277.218 533.661 277.792 533.146 278.242 532.472C278.703 531.785 279.005 530.962 279.147 530.004H286.285C286.167 532.087 285.598 533.922 284.58 535.508C283.574 537.082 282.183 538.313 280.408 539.201C278.632 540.089 276.531 540.533 274.105 540.533ZM291.128 540V512.727H298.461V517.486H298.745C299.242 515.793 300.077 514.515 301.249 513.651C302.42 512.775 303.77 512.337 305.297 512.337C305.676 512.337 306.084 512.36 306.522 512.408C306.96 512.455 307.345 512.52 307.676 512.603V519.315C307.321 519.208 306.83 519.113 306.202 519.031C305.575 518.948 305.001 518.906 304.48 518.906C303.367 518.906 302.373 519.149 301.497 519.634C300.633 520.108 299.946 520.771 299.438 521.623C298.94 522.475 298.692 523.458 298.692 524.57V540H291.128ZM311.587 540V512.727H319.151V540H311.587ZM315.387 509.212C314.262 509.212 313.297 508.839 312.492 508.093C311.699 507.335 311.303 506.43 311.303 505.376C311.303 504.335 311.699 503.441 312.492 502.695C313.297 501.938 314.262 501.559 315.387 501.559C316.511 501.559 317.47 501.938 318.263 502.695C319.068 503.441 319.47 504.335 319.47 505.376C319.47 506.43 319.068 507.335 318.263 508.093C317.47 508.839 316.511 509.212 315.387 509.212ZM325.21 550.227V512.727H332.667V517.308H333.005C333.336 516.574 333.815 515.829 334.443 515.071C335.082 514.302 335.911 513.662 336.929 513.153C337.958 512.633 339.237 512.372 340.764 512.372C342.752 512.372 344.587 512.893 346.268 513.935C347.949 514.964 349.292 516.521 350.299 518.604C351.305 520.676 351.808 523.274 351.808 526.399C351.808 529.441 351.317 532.01 350.334 534.105C349.364 536.188 348.038 537.769 346.357 538.846C344.688 539.911 342.818 540.444 340.746 540.444C339.278 540.444 338.029 540.201 337 539.716C335.982 539.231 335.147 538.621 334.496 537.887C333.845 537.141 333.348 536.39 333.005 535.632H332.774V550.227H325.21ZM332.614 526.364C332.614 527.985 332.839 529.4 333.289 530.607C333.739 531.815 334.39 532.756 335.242 533.43C336.094 534.093 337.13 534.425 338.349 534.425C339.58 534.425 340.622 534.087 341.474 533.413C342.326 532.726 342.971 531.779 343.409 530.572C343.859 529.353 344.084 527.95 344.084 526.364C344.084 524.789 343.865 523.404 343.427 522.209C342.989 521.013 342.344 520.078 341.492 519.403C340.64 518.729 339.592 518.391 338.349 518.391C337.118 518.391 336.076 518.717 335.224 519.368C334.384 520.019 333.739 520.942 333.289 522.138C332.839 523.333 332.614 524.742 332.614 526.364ZM371.357 512.727V518.409H354.933V512.727H371.357ZM358.662 506.193H366.225V531.619C366.225 532.318 366.332 532.862 366.545 533.253C366.758 533.632 367.054 533.898 367.433 534.052C367.824 534.206 368.273 534.283 368.782 534.283C369.137 534.283 369.493 534.253 369.848 534.194C370.203 534.123 370.475 534.07 370.664 534.034L371.854 539.663C371.475 539.781 370.943 539.917 370.256 540.071C369.569 540.237 368.735 540.337 367.752 540.373C365.93 540.444 364.332 540.201 362.958 539.645C361.597 539.089 360.538 538.224 359.78 537.053C359.023 535.881 358.65 534.401 358.662 532.614V506.193Z"
          fill="white"
        />
        <path d="M314 142L494.999 169H133.001L314 142Z" fill="white" />
        <path d="M314 435L133.001 408L494.999 408L314 435Z" fill="white" />
        <rect x="314" y="109" width="209" height="360" fill="#B97059" />
        <rect
          x="269.5"
          y="170.5"
          width="178"
          height="236"
          rx="8.5"
          fill="#B97059"
          stroke="white"
          stroke-width="3"
        />
        <rect x="133" y="169" width="181" height="239" fill="white" />
        <path
          d="M264.159 251.909C263.307 244.712 259.85 239.125 253.79 235.148C247.729 231.17 240.295 229.182 231.489 229.182C225.049 229.182 219.415 230.223 214.585 232.307C209.803 234.39 206.063 237.255 203.364 240.901C200.712 244.546 199.386 248.689 199.386 253.33C199.386 257.212 200.31 260.55 202.156 263.344C204.05 266.09 206.465 268.386 209.401 270.233C212.336 272.032 215.414 273.524 218.634 274.707C221.853 275.844 224.812 276.767 227.511 277.477L242.284 281.455C246.072 282.449 250.286 283.822 254.926 285.574C259.614 287.326 264.088 289.717 268.349 292.747C272.658 295.73 276.209 299.565 279.003 304.253C281.796 308.94 283.193 314.693 283.193 321.511C283.193 329.371 281.134 336.473 277.014 342.818C272.942 349.163 266.976 354.205 259.116 357.946C251.304 361.687 241.811 363.557 230.636 363.557C220.22 363.557 211.2 361.876 203.577 358.514C196.001 355.152 190.035 350.465 185.679 344.452C181.37 338.438 178.932 331.455 178.364 323.5H196.545C197.019 328.992 198.866 333.538 202.085 337.136C205.352 340.687 209.472 343.339 214.443 345.091C219.462 346.795 224.86 347.648 230.636 347.648C237.36 347.648 243.397 346.559 248.747 344.381C254.098 342.155 258.335 339.078 261.46 335.148C264.585 331.17 266.148 326.53 266.148 321.227C266.148 316.398 264.798 312.468 262.099 309.438C259.401 306.407 255.849 303.945 251.446 302.051C247.043 300.157 242.284 298.5 237.17 297.08L219.273 291.966C207.909 288.699 198.913 284.035 192.284 277.974C185.655 271.914 182.341 263.983 182.341 254.182C182.341 246.038 184.543 238.936 188.946 232.875C193.397 226.767 199.363 222.032 206.844 218.67C214.372 215.261 222.777 213.557 232.057 213.557C241.432 213.557 249.765 215.238 257.057 218.599C264.348 221.914 270.125 226.459 274.386 232.236C278.695 238.012 280.968 244.57 281.205 251.909H264.159Z"
          fill="#B97059"
        />
        <path
          d="M394.45 329.15L420.9 293.5L394.45 257.85L402.5 247L437 293.5L402.5 340L394.45 329.15ZM364.55 329.15L338.1 293.5L364.55 257.85L356.5 247L322 293.5L356.5 340L364.55 329.15Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
