/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Sequence(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle id="Ellipse 1" cx="300" cy="300" r="300" fill="#3D84B8" />
        <path
          id="Sequence"
          d="M219.31 494.276C219.196 493.13 218.708 492.24 217.847 491.605C216.985 490.971 215.815 490.653 214.338 490.653C213.334 490.653 212.487 490.795 211.795 491.08C211.104 491.354 210.574 491.738 210.205 492.23C209.845 492.723 209.665 493.281 209.665 493.906C209.646 494.427 209.755 494.882 209.991 495.27C210.238 495.658 210.574 495.994 211 496.278C211.426 496.553 211.919 496.795 212.477 497.003C213.036 497.202 213.633 497.372 214.267 497.514L216.881 498.139C218.15 498.423 219.314 498.802 220.375 499.276C221.436 499.749 222.354 500.331 223.131 501.023C223.907 501.714 224.509 502.528 224.935 503.466C225.37 504.403 225.593 505.478 225.602 506.69C225.593 508.471 225.138 510.014 224.239 511.321C223.348 512.618 222.061 513.627 220.375 514.347C218.699 515.057 216.677 515.412 214.31 515.412C211.961 515.412 209.916 515.052 208.173 514.332C206.44 513.613 205.086 512.547 204.111 511.136C203.145 509.716 202.638 507.959 202.591 505.866H208.543C208.609 506.842 208.888 507.656 209.381 508.31C209.883 508.954 210.55 509.441 211.384 509.773C212.226 510.095 213.178 510.256 214.239 510.256C215.28 510.256 216.185 510.104 216.952 509.801C217.728 509.498 218.33 509.077 218.756 508.537C219.182 507.997 219.395 507.377 219.395 506.676C219.395 506.023 219.201 505.473 218.812 505.028C218.434 504.583 217.875 504.205 217.136 503.892C216.407 503.58 215.512 503.295 214.452 503.04L211.284 502.244C208.831 501.648 206.895 500.715 205.474 499.446C204.054 498.177 203.348 496.468 203.358 494.318C203.348 492.557 203.817 491.018 204.764 489.702C205.721 488.385 207.032 487.358 208.699 486.619C210.366 485.881 212.259 485.511 214.381 485.511C216.54 485.511 218.424 485.881 220.034 486.619C221.653 487.358 222.913 488.385 223.812 489.702C224.712 491.018 225.176 492.543 225.205 494.276H219.31ZM239.569 515.426C237.325 515.426 235.393 514.972 233.773 514.062C232.164 513.144 230.923 511.847 230.052 510.17C229.181 508.485 228.745 506.491 228.745 504.19C228.745 501.946 229.181 499.976 230.052 498.281C230.923 496.586 232.149 495.265 233.731 494.318C235.322 493.371 237.187 492.898 239.327 492.898C240.767 492.898 242.107 493.13 243.347 493.594C244.597 494.048 245.686 494.735 246.614 495.653C247.552 496.572 248.281 497.727 248.802 499.119C249.323 500.502 249.583 502.121 249.583 503.977V505.639H231.16V501.889H243.887C243.887 501.018 243.698 500.246 243.319 499.574C242.94 498.902 242.415 498.376 241.742 497.997C241.079 497.609 240.308 497.415 239.427 497.415C238.508 497.415 237.694 497.628 236.984 498.054C236.283 498.471 235.734 499.034 235.336 499.744C234.938 500.445 234.735 501.226 234.725 502.088V505.653C234.725 506.733 234.924 507.666 235.322 508.452C235.729 509.238 236.302 509.844 237.04 510.27C237.779 510.696 238.655 510.909 239.668 510.909C240.341 510.909 240.956 510.814 241.515 510.625C242.074 510.436 242.552 510.152 242.95 509.773C243.347 509.394 243.65 508.93 243.859 508.381L249.455 508.75C249.171 510.095 248.589 511.269 247.708 512.273C246.837 513.267 245.71 514.044 244.327 514.602C242.954 515.152 241.368 515.426 239.569 515.426ZM267.95 523.182V511.506H267.765C267.481 512.112 267.078 512.713 266.558 513.31C266.046 513.897 265.379 514.384 264.555 514.773C263.74 515.161 262.746 515.355 261.572 515.355C259.915 515.355 258.414 514.929 257.069 514.077C255.734 513.215 254.673 511.951 253.887 510.284C253.111 508.608 252.722 506.553 252.722 504.119C252.722 501.619 253.125 499.541 253.93 497.884C254.735 496.217 255.805 494.972 257.14 494.148C258.485 493.314 259.957 492.898 261.558 492.898C262.779 492.898 263.797 493.106 264.612 493.523C265.435 493.93 266.098 494.441 266.6 495.057C267.112 495.663 267.5 496.259 267.765 496.847H268.021V493.182H273.987V523.182H267.95ZM263.489 510.54C264.465 510.54 265.289 510.275 265.961 509.744C266.643 509.205 267.164 508.452 267.523 507.486C267.893 506.52 268.077 505.388 268.077 504.091C268.077 502.794 267.897 501.667 267.538 500.71C267.178 499.754 266.657 499.015 265.975 498.494C265.293 497.973 264.465 497.713 263.489 497.713C262.495 497.713 261.657 497.983 260.975 498.523C260.293 499.062 259.777 499.811 259.427 500.767C259.076 501.723 258.901 502.831 258.901 504.091C258.901 505.36 259.076 506.482 259.427 507.457C259.787 508.423 260.303 509.181 260.975 509.73C261.657 510.27 262.495 510.54 263.489 510.54ZM292.836 505.71V493.182H298.887V515H293.077V511.037H292.85C292.358 512.315 291.539 513.343 290.393 514.119C289.256 514.896 287.869 515.284 286.231 515.284C284.772 515.284 283.489 514.953 282.381 514.29C281.273 513.627 280.407 512.685 279.782 511.463C279.166 510.241 278.854 508.778 278.844 507.074V493.182H284.896V505.994C284.905 507.282 285.251 508.3 285.933 509.048C286.614 509.796 287.528 510.17 288.674 510.17C289.403 510.17 290.085 510.005 290.719 509.673C291.354 509.332 291.865 508.83 292.254 508.168C292.651 507.505 292.845 506.686 292.836 505.71ZM313.67 515.426C311.426 515.426 309.494 514.972 307.875 514.062C306.265 513.144 305.025 511.847 304.153 510.17C303.282 508.485 302.847 506.491 302.847 504.19C302.847 501.946 303.282 499.976 304.153 498.281C305.025 496.586 306.251 495.265 307.832 494.318C309.423 493.371 311.289 492.898 313.429 492.898C314.868 492.898 316.208 493.13 317.449 493.594C318.699 494.048 319.788 494.735 320.716 495.653C321.653 496.572 322.383 497.727 322.903 499.119C323.424 500.502 323.685 502.121 323.685 503.977V505.639H305.261V501.889H317.989C317.989 501.018 317.799 500.246 317.42 499.574C317.042 498.902 316.516 498.376 315.844 497.997C315.181 497.609 314.409 497.415 313.528 497.415C312.61 497.415 311.795 497.628 311.085 498.054C310.384 498.471 309.835 499.034 309.438 499.744C309.04 500.445 308.836 501.226 308.827 502.088V505.653C308.827 506.733 309.026 507.666 309.423 508.452C309.83 509.238 310.403 509.844 311.142 510.27C311.881 510.696 312.757 510.909 313.77 510.909C314.442 510.909 315.058 510.814 315.616 510.625C316.175 510.436 316.653 510.152 317.051 509.773C317.449 509.394 317.752 508.93 317.96 508.381L323.557 508.75C323.273 510.095 322.69 511.269 321.81 512.273C320.938 513.267 319.812 514.044 318.429 514.602C317.056 515.152 315.47 515.426 313.67 515.426ZM333.685 502.386V515H327.634V493.182H333.401V497.031H333.656C334.139 495.762 334.949 494.759 336.085 494.02C337.222 493.272 338.599 492.898 340.219 492.898C341.734 492.898 343.055 493.229 344.182 493.892C345.309 494.555 346.185 495.502 346.81 496.733C347.435 497.955 347.747 499.413 347.747 501.108V515H341.696V502.188C341.705 500.852 341.365 499.811 340.673 499.062C339.982 498.305 339.03 497.926 337.818 497.926C337.004 497.926 336.284 498.101 335.659 498.452C335.044 498.802 334.561 499.313 334.21 499.986C333.869 500.649 333.694 501.449 333.685 502.386ZM362.374 515.426C360.139 515.426 358.217 514.953 356.607 514.006C355.007 513.049 353.776 511.723 352.914 510.028C352.062 508.333 351.636 506.383 351.636 504.176C351.636 501.941 352.067 499.981 352.928 498.295C353.799 496.6 355.035 495.279 356.636 494.332C358.236 493.376 360.139 492.898 362.346 492.898C364.249 492.898 365.916 493.243 367.346 493.935C368.776 494.626 369.907 495.597 370.741 496.847C371.574 498.097 372.033 499.564 372.119 501.25H366.408C366.247 500.161 365.821 499.285 365.13 498.622C364.448 497.95 363.553 497.614 362.445 497.614C361.508 497.614 360.689 497.869 359.988 498.381C359.297 498.883 358.757 499.616 358.369 500.582C357.98 501.548 357.786 502.718 357.786 504.091C357.786 505.483 357.976 506.667 358.354 507.642C358.743 508.617 359.287 509.361 359.988 509.872C360.689 510.384 361.508 510.639 362.445 510.639C363.137 510.639 363.757 510.497 364.306 510.213C364.865 509.929 365.324 509.517 365.684 508.977C366.053 508.428 366.295 507.77 366.408 507.003H372.119C372.024 508.67 371.569 510.137 370.755 511.406C369.95 512.666 368.837 513.651 367.417 514.361C365.996 515.071 364.316 515.426 362.374 515.426ZM385.936 515.426C383.692 515.426 381.76 514.972 380.141 514.062C378.531 513.144 377.29 511.847 376.419 510.17C375.548 508.485 375.112 506.491 375.112 504.19C375.112 501.946 375.548 499.976 376.419 498.281C377.29 496.586 378.517 495.265 380.098 494.318C381.689 493.371 383.554 492.898 385.695 492.898C387.134 492.898 388.474 493.13 389.714 493.594C390.964 494.048 392.054 494.735 392.982 495.653C393.919 496.572 394.648 497.727 395.169 499.119C395.69 500.502 395.95 502.121 395.95 503.977V505.639H377.527V501.889H390.254C390.254 501.018 390.065 500.246 389.686 499.574C389.307 498.902 388.782 498.376 388.109 497.997C387.446 497.609 386.675 497.415 385.794 497.415C384.875 497.415 384.061 497.628 383.351 498.054C382.65 498.471 382.101 499.034 381.703 499.744C381.305 500.445 381.102 501.226 381.092 502.088V505.653C381.092 506.733 381.291 507.666 381.689 508.452C382.096 509.238 382.669 509.844 383.408 510.27C384.146 510.696 385.022 510.909 386.036 510.909C386.708 510.909 387.323 510.814 387.882 510.625C388.441 510.436 388.919 510.152 389.317 509.773C389.714 509.394 390.018 508.93 390.226 508.381L395.822 508.75C395.538 510.095 394.956 511.269 394.075 512.273C393.204 513.267 392.077 514.044 390.695 514.602C389.321 515.152 387.735 515.426 385.936 515.426Z"
          fill="white"
        />
        <path
          id="Vector"
          d="M117.286 210V390H131.429V210H117.286ZM89 210V390H103.143V210H89ZM145.571 210V390H159.714V210H145.571ZM188 210H173.857V390H188V210Z"
          fill="white"
        />
        <path
          id="Vector_2"
          d="M229.286 210V390H243.429V210H229.286ZM201 210V390H215.143V210H201ZM257.571 210V390H271.714V210H257.571ZM300 210H285.857V390H300V210Z"
          fill="white"
        />
        <path
          id="Vector_3"
          d="M453.286 210V390H467.429V210H453.286ZM425 210V390H439.143V210H425ZM481.571 210V390H495.714V210H481.571ZM524 210H509.857V390H524V210Z"
          fill="white"
        />
        <path
          id="Vector_4"
          d="M341.286 233V413H355.429V233H341.286ZM313 233V413H327.143V233H313ZM369.571 233V413H383.714V233H369.571ZM412 233H397.857V413H412V233Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
