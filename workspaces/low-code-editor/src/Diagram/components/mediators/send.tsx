/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";
import { Circle, Square } from "@wso2-ei/low-code-diagram";

interface SquareProps {
  model: Square;
}

export function Send(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;

  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.tag, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.w}
        height={viewState.bBox.h}
        viewBox="0 0 800 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect width="800" height="600" fill="#1E1E1E" />
        <rect id="Rectangle 2" width="800" height="600" fill="#C0C0C0" />
        <path id="Rectangle 1" d="M10 10H430V590H10V10Z" fill="#3D84B8" />
        <rect
          id="Rectangle 3"
          x="473"
          y="10"
          width="310"
          height="580"
          fill="#A9A9A9"
        />
        <path
          id="Polygon 1"
          d="M468 299.5L439.5 335.44V263.56L468 299.5Z"
          fill="#71797E"
        />
        <path
          id="Send"
          d="M179.887 439.094C179.745 437.662 179.135 436.549 178.058 435.756C176.981 434.963 175.519 434.567 173.673 434.567C172.418 434.567 171.358 434.744 170.494 435.099C169.63 435.443 168.967 435.922 168.506 436.538C168.056 437.153 167.831 437.852 167.831 438.633C167.807 439.284 167.943 439.852 168.239 440.337C168.547 440.823 168.967 441.243 169.5 441.598C170.033 441.941 170.648 442.243 171.347 442.504C172.045 442.752 172.791 442.965 173.584 443.143L176.851 443.924C178.437 444.279 179.893 444.753 181.219 445.344C182.545 445.936 183.693 446.664 184.663 447.528C185.634 448.393 186.386 449.411 186.918 450.582C187.463 451.754 187.741 453.098 187.753 454.613C187.741 456.838 187.173 458.768 186.048 460.401C184.936 462.023 183.326 463.284 181.219 464.183C179.124 465.071 176.596 465.515 173.637 465.515C170.701 465.515 168.145 465.065 165.967 464.165C163.8 463.266 162.108 461.934 160.888 460.17C159.681 458.395 159.048 456.199 158.989 453.583H166.428C166.511 454.802 166.86 455.82 167.476 456.637C168.103 457.442 168.938 458.052 169.979 458.466C171.033 458.868 172.223 459.07 173.548 459.07C174.85 459.07 175.981 458.88 176.94 458.501C177.91 458.123 178.662 457.596 179.195 456.921C179.727 456.246 179.994 455.471 179.994 454.595C179.994 453.778 179.751 453.092 179.266 452.536C178.792 451.979 178.094 451.506 177.17 451.115C176.259 450.724 175.14 450.369 173.815 450.05L169.855 449.055C166.789 448.31 164.369 447.144 162.593 445.558C160.817 443.971 159.936 441.835 159.947 439.148C159.936 436.946 160.522 435.022 161.705 433.377C162.901 431.732 164.54 430.447 166.624 429.524C168.707 428.601 171.074 428.139 173.726 428.139C176.425 428.139 178.78 428.601 180.793 429.524C182.817 430.447 184.391 431.732 185.516 433.377C186.64 435.022 187.22 436.928 187.256 439.094H179.887ZM205.211 465.533C202.406 465.533 199.991 464.964 197.967 463.828C195.954 462.68 194.404 461.058 193.315 458.963C192.226 456.856 191.681 454.364 191.681 451.488C191.681 448.683 192.226 446.22 193.315 444.102C194.404 441.983 195.937 440.331 197.914 439.148C199.902 437.964 202.234 437.372 204.909 437.372C206.709 437.372 208.383 437.662 209.934 438.242C211.497 438.81 212.858 439.669 214.018 440.817C215.19 441.965 216.101 443.409 216.752 445.149C217.403 446.877 217.729 448.902 217.729 451.222V453.299H194.7V448.612H210.609C210.609 447.522 210.372 446.558 209.899 445.717C209.425 444.877 208.768 444.22 207.928 443.746C207.099 443.261 206.134 443.018 205.034 443.018C203.885 443.018 202.867 443.285 201.98 443.817C201.104 444.338 200.417 445.043 199.92 445.93C199.423 446.806 199.168 447.783 199.156 448.86V453.317C199.156 454.666 199.405 455.832 199.902 456.815C200.411 457.797 201.127 458.555 202.051 459.087C202.974 459.62 204.069 459.886 205.335 459.886C206.176 459.886 206.945 459.768 207.644 459.531C208.342 459.295 208.94 458.939 209.437 458.466C209.934 457.992 210.313 457.412 210.573 456.726L217.569 457.188C217.214 458.868 216.486 460.336 215.385 461.591C214.296 462.834 212.887 463.804 211.159 464.503C209.443 465.189 207.46 465.533 205.211 465.533ZM230.229 449.233V465H222.665V437.727H229.874V442.539H230.193C230.797 440.953 231.809 439.698 233.23 438.775C234.65 437.84 236.372 437.372 238.396 437.372C240.29 437.372 241.942 437.786 243.35 438.615C244.759 439.444 245.854 440.627 246.635 442.166C247.416 443.693 247.807 445.516 247.807 447.635V465H240.243V448.984C240.255 447.315 239.829 446.013 238.965 445.078C238.101 444.131 236.911 443.658 235.396 443.658C234.378 443.658 233.478 443.877 232.697 444.315C231.927 444.753 231.324 445.392 230.886 446.232C230.46 447.061 230.241 448.061 230.229 449.233ZM263.818 465.444C261.747 465.444 259.871 464.911 258.19 463.846C256.521 462.769 255.195 461.188 254.212 459.105C253.242 457.01 252.756 454.441 252.756 451.399C252.756 448.274 253.259 445.676 254.266 443.604C255.272 441.521 256.609 439.964 258.278 438.935C259.959 437.893 261.8 437.372 263.8 437.372C265.327 437.372 266.6 437.633 267.618 438.153C268.648 438.662 269.476 439.302 270.104 440.071C270.743 440.829 271.228 441.574 271.56 442.308H271.79V428.636H279.337V465H271.879V460.632H271.56C271.205 461.39 270.701 462.141 270.05 462.887C269.411 463.621 268.577 464.231 267.547 464.716C266.529 465.201 265.286 465.444 263.818 465.444ZM266.215 459.425C267.434 459.425 268.464 459.093 269.305 458.43C270.157 457.756 270.808 456.815 271.258 455.607C271.719 454.4 271.95 452.985 271.95 451.364C271.95 449.742 271.725 448.333 271.276 447.138C270.826 445.942 270.175 445.019 269.322 444.368C268.47 443.717 267.434 443.391 266.215 443.391C264.972 443.391 263.925 443.729 263.072 444.403C262.22 445.078 261.575 446.013 261.137 447.209C260.699 448.404 260.48 449.789 260.48 451.364C260.48 452.95 260.699 454.353 261.137 455.572C261.587 456.779 262.232 457.726 263.072 458.413C263.925 459.087 264.972 459.425 266.215 459.425Z"
          fill="white"
        />
        <path
          id="Vector"
          d="M325 298.789L291.684 265.474V287.684H247.263V309.895H291.684V332.105L325 298.789ZM213.947 298.789C213.947 295.458 213.947 291.016 215.058 287.684H136.211V265.474H222.832C228.384 256.589 235.047 248.816 243.932 243.263H136.211V221.053H269.474V233.268C272.805 232.158 277.247 232.158 280.579 232.158C283.911 232.158 288.353 232.158 291.684 233.268V176.632L225.053 110H136.211C123.995 110 114 119.995 114 132.211V309.895C114 322.111 123.995 332.105 136.211 332.105H222.832C217.279 322.111 213.947 311.005 213.947 298.789ZM213.947 126.658L275.026 187.737H213.947V126.658Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
