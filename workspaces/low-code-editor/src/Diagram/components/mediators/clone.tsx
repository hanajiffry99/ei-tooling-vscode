/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Clone(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.w}
        height={viewState.bBox.h}
        viewBox="0 0 800 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect width="800" height="600" fill="#C0C0C0" />
        <path d="M10 9H430V589H10V9Z" fill="#AD7B41" />
        <rect x="480" y="10" width="310" height="580" fill="#A9A9A9" />
        <path d="M468 299.5L439.5 335.44V263.56L468 299.5Z" fill="#71797E" />
        <path
          d="M192.77 509.724H187.457C187.306 508.853 187.027 508.081 186.619 507.409C186.212 506.727 185.705 506.15 185.099 505.676C184.493 505.203 183.802 504.848 183.026 504.611C182.259 504.365 181.43 504.241 180.54 504.241C178.958 504.241 177.557 504.639 176.335 505.435C175.114 506.221 174.157 507.376 173.466 508.901C172.775 510.416 172.429 512.267 172.429 514.455C172.429 516.68 172.775 518.555 173.466 520.08C174.167 521.595 175.123 522.741 176.335 523.517C177.557 524.284 178.954 524.668 180.526 524.668C181.397 524.668 182.211 524.554 182.969 524.327C183.736 524.09 184.422 523.744 185.028 523.29C185.644 522.835 186.16 522.277 186.577 521.614C187.003 520.951 187.296 520.193 187.457 519.341L192.77 519.369C192.571 520.752 192.14 522.049 191.477 523.261C190.824 524.473 189.967 525.544 188.906 526.472C187.846 527.39 186.605 528.11 185.185 528.631C183.764 529.142 182.188 529.398 180.455 529.398C177.898 529.398 175.616 528.806 173.608 527.622C171.6 526.438 170.019 524.729 168.864 522.494C167.708 520.259 167.131 517.58 167.131 514.455C167.131 511.32 167.713 508.64 168.878 506.415C170.043 504.18 171.629 502.471 173.636 501.287C175.644 500.103 177.917 499.511 180.455 499.511C182.074 499.511 183.58 499.739 184.972 500.193C186.364 500.648 187.604 501.315 188.693 502.196C189.782 503.067 190.677 504.137 191.378 505.406C192.088 506.666 192.552 508.105 192.77 509.724ZM202.511 499.909V529H197.369V499.909H202.511ZM217.315 529.426C215.185 529.426 213.338 528.957 211.776 528.02C210.213 527.082 209.001 525.771 208.139 524.085C207.287 522.4 206.861 520.43 206.861 518.176C206.861 515.922 207.287 513.948 208.139 512.253C209.001 510.558 210.213 509.241 211.776 508.304C213.338 507.366 215.185 506.898 217.315 506.898C219.446 506.898 221.293 507.366 222.855 508.304C224.418 509.241 225.625 510.558 226.477 512.253C227.339 513.948 227.77 515.922 227.77 518.176C227.77 520.43 227.339 522.4 226.477 524.085C225.625 525.771 224.418 527.082 222.855 528.02C221.293 528.957 219.446 529.426 217.315 529.426ZM217.344 525.307C218.499 525.307 219.465 524.99 220.241 524.355C221.018 523.711 221.596 522.849 221.974 521.77C222.363 520.69 222.557 519.488 222.557 518.162C222.557 516.827 222.363 515.619 221.974 514.54C221.596 513.451 221.018 512.584 220.241 511.94C219.465 511.296 218.499 510.974 217.344 510.974C216.16 510.974 215.175 511.296 214.389 511.94C213.613 512.584 213.03 513.451 212.642 514.54C212.263 515.619 212.074 516.827 212.074 518.162C212.074 519.488 212.263 520.69 212.642 521.77C213.03 522.849 213.613 523.711 214.389 524.355C215.175 524.99 216.16 525.307 217.344 525.307ZM237.276 516.216V529H232.134V507.182H237.049V510.889H237.305C237.807 509.668 238.607 508.697 239.705 507.977C240.813 507.258 242.182 506.898 243.81 506.898C245.316 506.898 246.628 507.22 247.745 507.864C248.872 508.508 249.743 509.44 250.359 510.662C250.984 511.884 251.291 513.366 251.282 515.108V529H246.14V515.903C246.14 514.445 245.761 513.304 245.004 512.48C244.255 511.656 243.219 511.244 241.893 511.244C240.993 511.244 240.193 511.443 239.492 511.841C238.801 512.229 238.256 512.793 237.859 513.531C237.47 514.27 237.276 515.165 237.276 516.216ZM266.168 529.426C263.981 529.426 262.092 528.972 260.501 528.062C258.919 527.144 257.702 525.847 256.85 524.17C255.998 522.485 255.572 520.501 255.572 518.219C255.572 515.974 255.998 514.005 256.85 512.31C257.712 510.605 258.915 509.279 260.458 508.332C262.002 507.376 263.815 506.898 265.898 506.898C267.243 506.898 268.512 507.116 269.705 507.551C270.908 507.977 271.969 508.64 272.887 509.54C273.815 510.439 274.544 511.585 275.075 512.977C275.605 514.36 275.87 516.008 275.87 517.92V519.497H257.987V516.031H270.941C270.932 515.046 270.719 514.17 270.302 513.403C269.885 512.627 269.303 512.016 268.555 511.571C267.816 511.126 266.954 510.903 265.969 510.903C264.918 510.903 263.995 511.159 263.2 511.67C262.404 512.172 261.784 512.835 261.339 513.659C260.903 514.473 260.681 515.368 260.671 516.344V519.369C260.671 520.638 260.903 521.727 261.367 522.636C261.831 523.536 262.48 524.227 263.313 524.71C264.147 525.184 265.122 525.42 266.239 525.42C266.987 525.42 267.665 525.316 268.271 525.108C268.877 524.89 269.402 524.573 269.847 524.156C270.292 523.74 270.629 523.223 270.856 522.608L275.657 523.148C275.354 524.417 274.776 525.525 273.924 526.472C273.081 527.409 272.002 528.138 270.685 528.659C269.369 529.17 267.863 529.426 266.168 529.426Z"
          fill="white"
        />
        <path
          d="M105.476 121C101.372 121 97.4352 122.994 94.5329 126.542C91.6305 130.091 90 134.904 90 139.923V291.304C90 296.322 91.6305 301.136 94.5329 304.684C97.4352 308.233 101.372 310.227 105.476 310.227H198.333C202.438 310.227 206.374 308.233 209.277 304.684C212.179 301.136 213.81 296.322 213.81 291.304V177.768L167.381 121H105.476ZM105.476 139.923H159.643V187.229H198.333V291.304H105.476V139.923ZM120.952 215.613V234.536H182.857V215.613H120.952ZM120.952 253.459V272.381H159.643V253.459H120.952Z"
          fill="white"
        />
        <rect
          x="158.095"
          y="163.387"
          width="55.7143"
          height="146.84"
          rx="13"
          fill="#AD7B41"
        />
        <path
          d="M173.571 163.387C169.467 163.387 165.53 165.38 162.628 168.929C159.726 172.478 158.095 177.291 158.095 182.309V333.691C158.095 338.709 159.726 343.522 162.628 347.071C165.53 350.62 169.467 352.613 173.571 352.613H266.429C270.533 352.613 274.47 350.62 277.372 347.071C280.274 343.522 281.905 338.709 281.905 333.691V220.155L235.476 163.387H173.571ZM173.571 182.309H227.738V229.616H266.429V333.691H173.571V182.309ZM189.048 258V276.923H250.952V258H189.048ZM189.048 295.845V314.768H227.738V295.845H189.048Z"
          fill="white"
        />
        <rect
          x="226.19"
          y="205.773"
          width="55.7143"
          height="146.84"
          rx="13"
          fill="#AD7B41"
        />
        <path
          d="M241.667 205.773C237.562 205.773 233.626 207.767 230.723 211.316C227.821 214.864 226.19 219.678 226.19 224.696V376.077C226.19 381.096 227.821 385.909 230.723 389.458C233.626 393.006 237.562 395 241.667 395H334.524C338.628 395 342.565 393.006 345.467 389.458C348.369 385.909 350 381.096 350 376.077V262.541L303.571 205.773H241.667ZM241.667 224.696H295.833V272.003H334.524V376.077H241.667V224.696ZM257.143 300.387V319.309H319.048V300.387H257.143ZM257.143 338.232V357.155H295.833V338.232H257.143Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
