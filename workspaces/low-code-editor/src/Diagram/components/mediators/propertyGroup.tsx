/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function PropertyGroup(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle id="Ellipse 1" cx="300" cy="300" r="300" fill="#3D84B8" />
        <g id="Rectangle 5" filter="url(#filter0_d_77_182)">
          <rect
            x="134"
            y="159"
            width="331"
            height="232"
            rx="40"
            fill="#3D84B8"
          />
          <rect
            x="132.5"
            y="157.5"
            width="334"
            height="235"
            rx="41.5"
            stroke="white"
            stroke-width="3"
          />
        </g>
        <path
          id="Property Group"
          d="M157.528 523V493.909H169.006C171.212 493.909 173.092 494.33 174.645 495.173C176.198 496.007 177.382 497.167 178.196 498.653C179.02 500.131 179.432 501.835 179.432 503.767C179.432 505.699 179.015 507.403 178.182 508.881C177.348 510.358 176.141 511.509 174.56 512.332C172.988 513.156 171.084 513.568 168.849 513.568H161.534V508.639H167.855C169.039 508.639 170.014 508.436 170.781 508.028C171.558 507.612 172.135 507.039 172.514 506.31C172.902 505.571 173.097 504.723 173.097 503.767C173.097 502.801 172.902 501.958 172.514 501.239C172.135 500.509 171.558 499.946 170.781 499.548C170.005 499.141 169.02 498.938 167.827 498.938H163.679V523H157.528ZM183.313 523V501.182H189.18V504.989H189.407C189.805 503.634 190.472 502.612 191.41 501.92C192.347 501.22 193.427 500.869 194.648 500.869C194.951 500.869 195.278 500.888 195.629 500.926C195.979 500.964 196.287 501.016 196.552 501.082V506.452C196.268 506.366 195.875 506.291 195.373 506.224C194.871 506.158 194.412 506.125 193.995 506.125C193.105 506.125 192.309 506.319 191.609 506.707C190.917 507.086 190.368 507.616 189.961 508.298C189.563 508.98 189.364 509.766 189.364 510.656V523H183.313ZM208.523 523.426C206.316 523.426 204.408 522.957 202.798 522.02C201.198 521.073 199.962 519.757 199.091 518.071C198.22 516.376 197.784 514.411 197.784 512.176C197.784 509.922 198.22 507.953 199.091 506.267C199.962 504.572 201.198 503.256 202.798 502.318C204.408 501.371 206.316 500.898 208.523 500.898C210.729 500.898 212.633 501.371 214.233 502.318C215.843 503.256 217.083 504.572 217.955 506.267C218.826 507.953 219.261 509.922 219.261 512.176C219.261 514.411 218.826 516.376 217.955 518.071C217.083 519.757 215.843 521.073 214.233 522.02C212.633 522.957 210.729 523.426 208.523 523.426ZM208.551 518.739C209.555 518.739 210.393 518.455 211.065 517.886C211.738 517.309 212.244 516.523 212.585 515.528C212.936 514.534 213.111 513.402 213.111 512.134C213.111 510.865 212.936 509.733 212.585 508.739C212.244 507.744 211.738 506.958 211.065 506.381C210.393 505.803 209.555 505.514 208.551 505.514C207.538 505.514 206.686 505.803 205.994 506.381C205.313 506.958 204.796 507.744 204.446 508.739C204.105 509.733 203.935 510.865 203.935 512.134C203.935 513.402 204.105 514.534 204.446 515.528C204.796 516.523 205.313 517.309 205.994 517.886C206.686 518.455 207.538 518.739 208.551 518.739ZM223.196 531.182V501.182H229.162V504.847H229.432C229.697 504.259 230.08 503.663 230.582 503.057C231.094 502.441 231.757 501.93 232.571 501.523C233.395 501.106 234.418 500.898 235.639 500.898C237.23 500.898 238.698 501.314 240.043 502.148C241.387 502.972 242.462 504.217 243.267 505.884C244.072 507.541 244.474 509.619 244.474 512.119C244.474 514.553 244.081 516.608 243.295 518.284C242.519 519.951 241.458 521.215 240.114 522.077C238.778 522.929 237.282 523.355 235.625 523.355C234.451 523.355 233.452 523.161 232.628 522.773C231.813 522.384 231.146 521.897 230.625 521.31C230.104 520.713 229.706 520.112 229.432 519.506H229.247V531.182H223.196ZM229.119 512.091C229.119 513.388 229.299 514.52 229.659 515.486C230.019 516.452 230.54 517.205 231.222 517.744C231.903 518.275 232.732 518.54 233.707 518.54C234.692 518.54 235.526 518.27 236.207 517.73C236.889 517.181 237.405 516.423 237.756 515.457C238.116 514.482 238.295 513.36 238.295 512.091C238.295 510.831 238.12 509.723 237.77 508.767C237.42 507.811 236.903 507.062 236.222 506.523C235.54 505.983 234.702 505.713 233.707 505.713C232.723 505.713 231.889 505.973 231.207 506.494C230.535 507.015 230.019 507.754 229.659 508.71C229.299 509.667 229.119 510.794 229.119 512.091ZM258.452 523.426C256.207 523.426 254.276 522.972 252.656 522.062C251.046 521.144 249.806 519.847 248.935 518.17C248.063 516.485 247.628 514.491 247.628 512.19C247.628 509.946 248.063 507.976 248.935 506.281C249.806 504.586 251.032 503.265 252.614 502.318C254.205 501.371 256.07 500.898 258.21 500.898C259.65 500.898 260.99 501.13 262.23 501.594C263.48 502.048 264.569 502.735 265.497 503.653C266.435 504.572 267.164 505.727 267.685 507.119C268.205 508.502 268.466 510.121 268.466 511.977V513.639H250.043V509.889H262.77C262.77 509.018 262.58 508.246 262.202 507.574C261.823 506.902 261.297 506.376 260.625 505.997C259.962 505.609 259.19 505.415 258.31 505.415C257.391 505.415 256.577 505.628 255.866 506.054C255.166 506.471 254.616 507.034 254.219 507.744C253.821 508.445 253.617 509.226 253.608 510.088V513.653C253.608 514.733 253.807 515.666 254.205 516.452C254.612 517.238 255.185 517.844 255.923 518.27C256.662 518.696 257.538 518.909 258.551 518.909C259.223 518.909 259.839 518.814 260.398 518.625C260.956 518.436 261.435 518.152 261.832 517.773C262.23 517.394 262.533 516.93 262.741 516.381L268.338 516.75C268.054 518.095 267.472 519.269 266.591 520.273C265.72 521.267 264.593 522.044 263.21 522.602C261.837 523.152 260.251 523.426 258.452 523.426ZM272.415 523V501.182H278.281V504.989H278.509C278.906 503.634 279.574 502.612 280.511 501.92C281.449 501.22 282.528 500.869 283.75 500.869C284.053 500.869 284.38 500.888 284.73 500.926C285.08 500.964 285.388 501.016 285.653 501.082V506.452C285.369 506.366 284.976 506.291 284.474 506.224C283.973 506.158 283.513 506.125 283.097 506.125C282.206 506.125 281.411 506.319 280.71 506.707C280.019 507.086 279.47 507.616 279.062 508.298C278.665 508.98 278.466 509.766 278.466 510.656V523H272.415ZM301.481 501.182V505.727H288.342V501.182H301.481ZM291.325 495.955H297.376V516.295C297.376 516.854 297.461 517.29 297.631 517.602C297.802 517.905 298.039 518.118 298.342 518.241C298.654 518.365 299.014 518.426 299.421 518.426C299.705 518.426 299.989 518.402 300.273 518.355C300.558 518.298 300.775 518.256 300.927 518.227L301.879 522.73C301.576 522.825 301.149 522.934 300.6 523.057C300.051 523.189 299.383 523.27 298.597 523.298C297.139 523.355 295.861 523.161 294.762 522.716C293.673 522.271 292.826 521.58 292.219 520.642C291.613 519.705 291.315 518.521 291.325 517.091V495.955ZM309.158 531.182C308.391 531.182 307.672 531.12 306.999 530.997C306.336 530.884 305.787 530.737 305.352 530.557L306.715 526.04C307.425 526.258 308.065 526.376 308.633 526.395C309.21 526.414 309.708 526.281 310.124 525.997C310.55 525.713 310.896 525.23 311.161 524.548L311.516 523.625L303.69 501.182H310.053L314.57 517.205H314.798L319.357 501.182H325.763L317.283 525.358C316.876 526.532 316.322 527.555 315.621 528.426C314.93 529.307 314.054 529.984 312.994 530.457C311.933 530.94 310.655 531.182 309.158 531.182ZM357.521 503.312C357.322 502.621 357.043 502.01 356.683 501.48C356.323 500.94 355.883 500.486 355.362 500.116C354.851 499.738 354.264 499.449 353.601 499.25C352.947 499.051 352.223 498.952 351.428 498.952C349.941 498.952 348.634 499.321 347.507 500.06C346.39 500.798 345.518 501.873 344.893 503.284C344.268 504.686 343.956 506.4 343.956 508.426C343.956 510.453 344.264 512.176 344.879 513.597C345.495 515.017 346.366 516.101 347.493 516.849C348.62 517.588 349.95 517.957 351.484 517.957C352.876 517.957 354.065 517.711 355.05 517.219C356.044 516.717 356.802 516.011 357.322 515.102C357.853 514.193 358.118 513.118 358.118 511.878L359.368 512.062H351.868V507.432H364.041V511.097C364.041 513.653 363.501 515.85 362.422 517.688C361.342 519.515 359.856 520.926 357.962 521.92C356.068 522.905 353.899 523.398 351.456 523.398C348.729 523.398 346.333 522.796 344.268 521.594C342.204 520.382 340.594 518.663 339.439 516.438C338.293 514.203 337.72 511.551 337.72 508.483C337.72 506.125 338.061 504.023 338.743 502.176C339.434 500.32 340.4 498.748 341.641 497.46C342.881 496.172 344.325 495.192 345.973 494.52C347.621 493.848 349.406 493.511 351.328 493.511C352.976 493.511 354.51 493.753 355.93 494.236C357.351 494.709 358.61 495.382 359.709 496.253C360.817 497.124 361.721 498.161 362.422 499.364C363.123 500.557 363.572 501.873 363.771 503.312H357.521ZM368.548 523V501.182H374.414V504.989H374.641C375.039 503.634 375.707 502.612 376.644 501.92C377.582 501.22 378.661 500.869 379.883 500.869C380.186 500.869 380.513 500.888 380.863 500.926C381.213 500.964 381.521 501.016 381.786 501.082V506.452C381.502 506.366 381.109 506.291 380.607 506.224C380.105 506.158 379.646 506.125 379.229 506.125C378.339 506.125 377.544 506.319 376.843 506.707C376.152 507.086 375.603 507.616 375.195 508.298C374.798 508.98 374.599 509.766 374.599 510.656V523H368.548ZM393.757 523.426C391.551 523.426 389.643 522.957 388.033 522.02C386.432 521.073 385.196 519.757 384.325 518.071C383.454 516.376 383.018 514.411 383.018 512.176C383.018 509.922 383.454 507.953 384.325 506.267C385.196 504.572 386.432 503.256 388.033 502.318C389.643 501.371 391.551 500.898 393.757 500.898C395.964 500.898 397.867 501.371 399.467 502.318C401.077 503.256 402.318 504.572 403.189 506.267C404.06 507.953 404.496 509.922 404.496 512.176C404.496 514.411 404.06 516.376 403.189 518.071C402.318 519.757 401.077 521.073 399.467 522.02C397.867 522.957 395.964 523.426 393.757 523.426ZM393.786 518.739C394.789 518.739 395.627 518.455 396.3 517.886C396.972 517.309 397.479 516.523 397.82 515.528C398.17 514.534 398.345 513.402 398.345 512.134C398.345 510.865 398.17 509.733 397.82 508.739C397.479 507.744 396.972 506.958 396.3 506.381C395.627 505.803 394.789 505.514 393.786 505.514C392.772 505.514 391.92 505.803 391.229 506.381C390.547 506.958 390.031 507.744 389.68 508.739C389.339 509.733 389.169 510.865 389.169 512.134C389.169 513.402 389.339 514.534 389.68 515.528C390.031 516.523 390.547 517.309 391.229 517.886C391.92 518.455 392.772 518.739 393.786 518.739ZM422.422 513.71V501.182H428.473V523H422.663V519.037H422.436C421.944 520.315 421.125 521.343 419.979 522.119C418.842 522.896 417.455 523.284 415.817 523.284C414.358 523.284 413.075 522.953 411.967 522.29C410.859 521.627 409.993 520.685 409.368 519.463C408.752 518.241 408.44 516.778 408.43 515.074V501.182H414.482V513.994C414.491 515.282 414.837 516.3 415.518 517.048C416.2 517.796 417.114 518.17 418.26 518.17C418.989 518.17 419.671 518.005 420.305 517.673C420.94 517.332 421.451 516.83 421.839 516.168C422.237 515.505 422.431 514.686 422.422 513.71ZM433.313 531.182V501.182H439.279V504.847H439.549C439.814 504.259 440.198 503.663 440.7 503.057C441.211 502.441 441.874 501.93 442.688 501.523C443.512 501.106 444.535 500.898 445.756 500.898C447.347 500.898 448.815 501.314 450.16 502.148C451.504 502.972 452.579 504.217 453.384 505.884C454.189 507.541 454.592 509.619 454.592 512.119C454.592 514.553 454.199 516.608 453.413 518.284C452.636 519.951 451.576 521.215 450.231 522.077C448.896 522.929 447.399 523.355 445.742 523.355C444.568 523.355 443.569 523.161 442.745 522.773C441.931 522.384 441.263 521.897 440.742 521.31C440.221 520.713 439.824 520.112 439.549 519.506H439.364V531.182H433.313ZM439.237 512.091C439.237 513.388 439.416 514.52 439.776 515.486C440.136 516.452 440.657 517.205 441.339 517.744C442.021 518.275 442.849 518.54 443.825 518.54C444.809 518.54 445.643 518.27 446.325 517.73C447.006 517.181 447.522 516.423 447.873 515.457C448.233 514.482 448.413 513.36 448.413 512.091C448.413 510.831 448.237 509.723 447.887 508.767C447.537 507.811 447.021 507.062 446.339 506.523C445.657 505.983 444.819 505.713 443.825 505.713C442.84 505.713 442.006 505.973 441.325 506.494C440.652 507.015 440.136 507.754 439.776 508.71C439.416 509.667 439.237 510.794 439.237 512.091Z"
          fill="white"
        />
        <path
          id="Vector"
          d="M181 169C171.65 169 164 176.65 164 186C164 195.35 171.65 203 181 203C190.35 203 198 195.35 198 186C198 176.65 190.35 169 181 169ZM177.6 194.5L169.1 186L171.497 183.603L177.6 189.689L190.503 176.786L192.9 179.2L177.6 194.5Z"
          fill="white"
        />
        <path
          id="Vector_2"
          d="M181 219C171.65 219 164 226.425 164 235.5C164 244.575 171.65 252 181 252C190.35 252 198 244.575 198 235.5C198 226.425 190.35 219 181 219ZM177.6 243.75L169.1 235.5L171.497 233.174L177.6 239.08L190.503 226.557L192.9 228.9L177.6 243.75Z"
          fill="white"
        />
        <rect
          id="Rectangle 1"
          x="216"
          y="169"
          width="181"
          height="34"
          rx="17"
          fill="white"
        />
        <rect
          id="Rectangle 2"
          x="216"
          y="219"
          width="181"
          height="33"
          rx="16.5"
          fill="white"
        />
        <path
          id="Vector_3"
          d="M245 267C235.65 267 228 274.65 228 284C228 293.35 235.65 301 245 301C254.35 301 262 293.35 262 284C262 274.65 254.35 267 245 267ZM241.6 292.5L233.1 284L235.497 281.603L241.6 287.689L254.503 274.786L256.9 277.2L241.6 292.5Z"
          fill="white"
        />
        <path
          id="Vector_4"
          d="M245 316C235.65 316 228 323.425 228 332.5C228 341.575 235.65 349 245 349C254.35 349 262 341.575 262 332.5C262 323.425 254.35 316 245 316ZM241.6 340.75L233.1 332.5L235.497 330.174L241.6 336.08L254.503 323.557L256.9 325.9L241.6 340.75Z"
          fill="white"
        />
        <rect
          id="Rectangle 3"
          x="279"
          y="267"
          width="180"
          height="34"
          rx="17"
          fill="white"
        />
        <rect
          id="Rectangle 4"
          x="279"
          y="316"
          width="180"
          height="33"
          rx="16.5"
          fill="white"
        />
        <defs>
          <filter
            id="filter0_d_77_182"
            x="127"
            y="156"
            width="345"
            height="246"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha"
            />
            <feOffset dy="4" />
            <feGaussianBlur stdDeviation="2" />
            <feComposite in2="hardAlpha" operator="out" />
            <feColorMatrix
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"
            />
            <feBlend
              mode="normal"
              in2="BackgroundImageFix"
              result="effect1_dropShadow_77_182"
            />
            <feBlend
              mode="normal"
              in="SourceGraphic"
              in2="effect1_dropShadow_77_182"
              result="shape"
            />
          </filter>
        </defs>
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
