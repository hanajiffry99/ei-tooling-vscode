/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Command(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#B97059" />
        <path
          d="M209.245 505.367H201.468C201.326 504.361 201.036 503.467 200.598 502.686C200.16 501.893 199.598 501.218 198.911 500.662C198.225 500.106 197.432 499.679 196.532 499.384C195.644 499.088 194.679 498.94 193.638 498.94C191.756 498.94 190.116 499.407 188.719 500.342C187.323 501.266 186.24 502.615 185.47 504.391C184.701 506.154 184.316 508.297 184.316 510.818C184.316 513.411 184.701 515.589 185.47 517.352C186.251 519.116 187.34 520.448 188.737 521.347C190.134 522.247 191.75 522.697 193.585 522.697C194.614 522.697 195.567 522.561 196.443 522.288C197.331 522.016 198.118 521.62 198.805 521.099C199.491 520.566 200.059 519.921 200.509 519.163C200.971 518.406 201.29 517.542 201.468 516.571L209.245 516.607C209.044 518.276 208.541 519.885 207.736 521.436C206.943 522.975 205.871 524.354 204.522 525.573C203.184 526.781 201.586 527.739 199.728 528.45C197.881 529.148 195.792 529.497 193.46 529.497C190.217 529.497 187.317 528.763 184.76 527.295C182.215 525.828 180.203 523.703 178.723 520.921C177.255 518.139 176.521 514.772 176.521 510.818C176.521 506.853 177.267 503.479 178.759 500.697C180.25 497.916 182.274 495.797 184.831 494.341C187.388 492.873 190.264 492.139 193.46 492.139C195.567 492.139 197.52 492.435 199.32 493.027C201.131 493.619 202.735 494.483 204.131 495.619C205.528 496.744 206.665 498.123 207.54 499.756C208.428 501.39 208.996 503.26 209.245 505.367ZM226.939 529.533C224.181 529.533 221.795 528.947 219.783 527.775C217.783 526.591 216.238 524.946 215.149 522.839C214.06 520.72 213.515 518.264 213.515 515.47C213.515 512.653 214.06 510.191 215.149 508.084C216.238 505.965 217.783 504.32 219.783 503.148C221.795 501.964 224.181 501.372 226.939 501.372C229.697 501.372 232.076 501.964 234.076 503.148C236.089 504.32 237.639 505.965 238.728 508.084C239.817 510.191 240.362 512.653 240.362 515.47C240.362 518.264 239.817 520.72 238.728 522.839C237.639 524.946 236.089 526.591 234.076 527.775C232.076 528.947 229.697 529.533 226.939 529.533ZM226.974 523.673C228.229 523.673 229.276 523.318 230.117 522.608C230.957 521.886 231.591 520.903 232.017 519.661C232.455 518.418 232.674 517.003 232.674 515.417C232.674 513.831 232.455 512.416 232.017 511.173C231.591 509.93 230.957 508.948 230.117 508.226C229.276 507.504 228.229 507.143 226.974 507.143C225.708 507.143 224.642 507.504 223.778 508.226C222.926 508.948 222.281 509.93 221.843 511.173C221.417 512.416 221.203 513.831 221.203 515.417C221.203 517.003 221.417 518.418 221.843 519.661C222.281 520.903 222.926 521.886 223.778 522.608C224.642 523.318 225.708 523.673 226.974 523.673ZM245.28 529V501.727H252.489V506.539H252.809C253.377 504.941 254.324 503.68 255.65 502.757C256.975 501.834 258.561 501.372 260.408 501.372C262.278 501.372 263.87 501.84 265.184 502.775C266.498 503.698 267.374 504.953 267.812 506.539H268.096C268.653 504.977 269.659 503.728 271.115 502.793C272.583 501.846 274.317 501.372 276.317 501.372C278.862 501.372 280.928 502.183 282.514 503.805C284.112 505.415 284.911 507.699 284.911 510.658V529H277.365V512.15C277.365 510.635 276.962 509.498 276.157 508.741C275.352 507.983 274.346 507.604 273.139 507.604C271.766 507.604 270.694 508.042 269.925 508.918C269.156 509.782 268.771 510.925 268.771 512.345V529H261.438V511.99C261.438 510.652 261.053 509.587 260.284 508.794C259.526 508.001 258.526 507.604 257.283 507.604C256.443 507.604 255.685 507.817 255.01 508.244C254.347 508.658 253.821 509.244 253.43 510.001C253.039 510.747 252.844 511.623 252.844 512.629V529H245.28ZM290.886 529V501.727H298.094V506.539H298.414C298.982 504.941 299.929 503.68 301.255 502.757C302.581 501.834 304.167 501.372 306.013 501.372C307.884 501.372 309.476 501.84 310.79 502.775C312.104 503.698 312.98 504.953 313.418 506.539H313.702C314.258 504.977 315.264 503.728 316.72 502.793C318.188 501.846 319.922 501.372 321.923 501.372C324.468 501.372 326.533 502.183 328.119 503.805C329.717 505.415 330.516 507.699 330.516 510.658V529H322.97V512.15C322.97 510.635 322.568 509.498 321.763 508.741C320.958 507.983 319.952 507.604 318.744 507.604C317.371 507.604 316.3 508.042 315.531 508.918C314.761 509.782 314.376 510.925 314.376 512.345V529H307.043V511.99C307.043 510.652 306.659 509.587 305.889 508.794C305.132 508.001 304.131 507.604 302.888 507.604C302.048 507.604 301.29 507.817 300.616 508.244C299.953 508.658 299.426 509.244 299.036 510.001C298.645 510.747 298.45 511.623 298.45 512.629V529H290.886ZM344.268 529.515C342.528 529.515 340.977 529.213 339.616 528.609C338.255 527.994 337.178 527.088 336.385 525.893C335.603 524.685 335.213 523.182 335.213 521.383C335.213 519.868 335.491 518.595 336.047 517.565C336.604 516.536 337.361 515.707 338.32 515.08C339.279 514.452 340.368 513.979 341.587 513.659C342.818 513.339 344.108 513.115 345.458 512.984C347.044 512.819 348.322 512.665 349.293 512.523C350.264 512.369 350.968 512.144 351.406 511.848C351.844 511.552 352.063 511.114 352.063 510.534V510.428C352.063 509.303 351.708 508.433 350.998 507.817C350.299 507.202 349.305 506.894 348.015 506.894C346.653 506.894 345.57 507.196 344.765 507.8C343.96 508.392 343.428 509.137 343.167 510.037L336.172 509.469C336.527 507.812 337.225 506.379 338.267 505.172C339.308 503.953 340.652 503.018 342.297 502.366C343.954 501.704 345.872 501.372 348.05 501.372C349.565 501.372 351.015 501.55 352.4 501.905C353.797 502.26 355.034 502.81 356.111 503.556C357.2 504.302 358.058 505.261 358.686 506.433C359.313 507.593 359.627 508.983 359.627 510.605V529H352.453V525.218H352.24C351.802 526.07 351.217 526.822 350.483 527.473C349.749 528.112 348.867 528.615 347.837 528.982C346.807 529.337 345.618 529.515 344.268 529.515ZM346.434 524.295C347.547 524.295 348.529 524.076 349.382 523.638C350.234 523.188 350.903 522.584 351.388 521.827C351.873 521.069 352.116 520.211 352.116 519.252V516.358C351.879 516.512 351.554 516.654 351.14 516.784C350.737 516.902 350.281 517.015 349.772 517.121C349.263 517.216 348.754 517.305 348.245 517.388C347.736 517.459 347.275 517.524 346.86 517.583C345.973 517.713 345.197 517.92 344.534 518.205C343.872 518.489 343.357 518.873 342.99 519.359C342.623 519.832 342.439 520.424 342.439 521.134C342.439 522.164 342.812 522.951 343.558 523.496C344.315 524.028 345.274 524.295 346.434 524.295ZM373.059 513.233V529H365.495V501.727H372.704V506.539H373.023C373.627 504.953 374.639 503.698 376.06 502.775C377.48 501.84 379.202 501.372 381.227 501.372C383.121 501.372 384.772 501.786 386.18 502.615C387.589 503.444 388.684 504.627 389.465 506.166C390.246 507.693 390.637 509.516 390.637 511.635V529H383.073V512.984C383.085 511.315 382.659 510.013 381.795 509.078C380.931 508.131 379.741 507.658 378.226 507.658C377.208 507.658 376.308 507.877 375.527 508.315C374.758 508.753 374.154 509.392 373.716 510.232C373.29 511.061 373.071 512.061 373.059 513.233ZM406.648 529.444C404.577 529.444 402.701 528.911 401.02 527.846C399.351 526.769 398.025 525.188 397.042 523.105C396.072 521.01 395.586 518.441 395.586 515.399C395.586 512.274 396.09 509.676 397.096 507.604C398.102 505.521 399.439 503.964 401.108 502.935C402.789 501.893 404.63 501.372 406.631 501.372C408.157 501.372 409.43 501.633 410.448 502.153C411.478 502.662 412.306 503.302 412.934 504.071C413.573 504.829 414.058 505.574 414.39 506.308H414.621V492.636H422.167V529H414.709V524.632H414.39C414.035 525.39 413.532 526.141 412.881 526.887C412.241 527.621 411.407 528.231 410.377 528.716C409.359 529.201 408.116 529.444 406.648 529.444ZM409.045 523.425C410.265 523.425 411.294 523.093 412.135 522.43C412.987 521.756 413.638 520.815 414.088 519.607C414.55 518.4 414.78 516.985 414.78 515.364C414.78 513.742 414.555 512.333 414.106 511.138C413.656 509.942 413.005 509.019 412.153 508.368C411.3 507.717 410.265 507.391 409.045 507.391C407.802 507.391 406.755 507.729 405.903 508.403C405.05 509.078 404.405 510.013 403.967 511.209C403.529 512.404 403.31 513.789 403.31 515.364C403.31 516.95 403.529 518.353 403.967 519.572C404.417 520.779 405.062 521.726 405.903 522.413C406.755 523.087 407.802 523.425 409.045 523.425Z"
          fill="white"
        />
        <path d="M314 142L494.999 169H133.001L314 142Z" fill="white" />
        <path d="M314 435L133.001 408L494.999 408L314 435Z" fill="white" />
        <rect x="314" y="109" width="209" height="360" fill="#B97059" />
        <rect
          x="269.5"
          y="170.5"
          width="178"
          height="236"
          rx="8.5"
          fill="#B97059"
          stroke="white"
          stroke-width="3"
        />
        <path
          d="M376.453 239.224C376.453 239.224 320.293 252.31 347.223 281.161C355.188 289.656 345.171 297.309 345.171 297.309C345.171 297.309 365.286 287.743 355.927 275.498C347.223 264.249 340.655 258.662 376.453 239.224ZM339.752 248.407C373.004 223.918 355.927 208 355.927 208C362.823 233.254 331.624 240.907 320.375 256.672C312.657 267.386 324.152 278.942 339.506 292.181C333.676 279.172 313.068 267.998 339.752 248.407ZM317.912 326.39C292.624 332.971 333.348 346.517 365.451 333.736C362.331 332.589 359.293 331.211 356.419 329.604C345.253 331.976 333.758 332.436 322.428 330.981C311.672 329.757 317.912 326.39 317.912 326.39ZM361.592 313.533C347.223 316.441 332.362 317.13 317.748 315.523C306.992 314.528 314.053 309.63 314.053 309.63C286.137 318.278 329.489 327.997 368.242 317.436C365.861 316.594 363.562 315.14 361.592 313.533ZM389.672 338.787C389.672 338.787 394.352 342.384 384.663 345.139C365.943 350.343 307.238 351.95 290.982 345.369C285.152 342.996 296.154 339.706 299.603 339.017C301.491 338.558 303.379 338.405 305.268 338.405C298.782 334.272 263.148 346.823 287.287 350.343C352.724 360.292 406.667 345.751 389.672 338.787ZM367.175 301.594C369.556 300.14 372.101 298.916 374.729 297.845C374.729 297.845 362.331 299.834 349.933 300.906C336.796 302.13 323.577 302.283 310.44 301.365C291.146 298.993 321.032 292.181 321.032 292.181C312 292.181 303.133 294.171 295.087 297.921C278.255 305.574 336.96 309.018 367.175 301.594ZM374.564 320.114C374.4 320.421 374.236 320.65 373.907 320.88C415.042 310.854 399.935 285.37 380.23 291.722C379.162 292.181 378.259 292.794 377.684 293.636C378.834 293.253 379.983 292.947 381.215 292.717C391.067 290.88 405.189 305.191 374.564 320.114ZM375.632 355.394C350.918 359.374 325.63 359.68 300.752 356.465C300.752 356.465 304.529 359.374 323.824 360.521C353.381 362.282 398.785 359.527 399.853 346.517C400.099 346.593 397.964 351.491 375.632 355.394Z"
          fill="white"
        />
        <rect x="133" y="169" width="181" height="239" fill="white" />
        <path
          d="M184.614 361V215.545H233.761C245.172 215.545 254.5 217.605 261.744 221.724C269.036 225.796 274.434 231.312 277.938 238.273C281.441 245.233 283.193 252.998 283.193 261.568C283.193 270.138 281.441 277.927 277.938 284.935C274.481 291.942 269.131 297.529 261.886 301.696C254.642 305.815 245.362 307.875 234.045 307.875H198.818V292.25H233.477C241.29 292.25 247.563 290.901 252.298 288.202C257.033 285.503 260.466 281.857 262.597 277.264C264.775 272.624 265.864 267.392 265.864 261.568C265.864 255.744 264.775 250.536 262.597 245.943C260.466 241.35 257.009 237.752 252.227 235.148C247.445 232.496 241.1 231.17 233.193 231.17H202.227V361H184.614Z"
          fill="#B97059"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
