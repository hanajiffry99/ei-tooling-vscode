/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function Spring(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#B97059" />
        <path
          d="M241.887 509.094C241.745 507.662 241.135 506.549 240.058 505.756C238.981 504.963 237.519 504.567 235.673 504.567C234.418 504.567 233.358 504.744 232.494 505.099C231.63 505.443 230.967 505.922 230.506 506.538C230.056 507.153 229.831 507.852 229.831 508.633C229.807 509.284 229.943 509.852 230.239 510.337C230.547 510.823 230.967 511.243 231.5 511.598C232.033 511.941 232.648 512.243 233.347 512.504C234.045 512.752 234.791 512.965 235.584 513.143L238.851 513.924C240.437 514.279 241.893 514.753 243.219 515.344C244.545 515.936 245.693 516.664 246.663 517.528C247.634 518.393 248.386 519.411 248.918 520.582C249.463 521.754 249.741 523.098 249.753 524.613C249.741 526.838 249.173 528.768 248.048 530.401C246.936 532.023 245.326 533.284 243.219 534.183C241.124 535.071 238.596 535.515 235.637 535.515C232.701 535.515 230.145 535.065 227.967 534.165C225.8 533.266 224.108 531.934 222.888 530.17C221.681 528.395 221.048 526.199 220.989 523.583H228.428C228.511 524.802 228.86 525.82 229.476 526.637C230.103 527.442 230.938 528.052 231.979 528.466C233.033 528.868 234.223 529.07 235.548 529.07C236.85 529.07 237.981 528.88 238.94 528.501C239.91 528.123 240.662 527.596 241.195 526.921C241.727 526.246 241.994 525.471 241.994 524.595C241.994 523.778 241.751 523.092 241.266 522.536C240.792 521.979 240.094 521.506 239.17 521.115C238.259 520.724 237.14 520.369 235.815 520.05L231.855 519.055C228.789 518.31 226.369 517.144 224.593 515.558C222.817 513.971 221.936 511.835 221.947 509.148C221.936 506.946 222.522 505.022 223.705 503.377C224.901 501.732 226.54 500.447 228.624 499.524C230.707 498.601 233.074 498.139 235.726 498.139C238.425 498.139 240.78 498.601 242.793 499.524C244.817 500.447 246.391 501.732 247.516 503.377C248.64 505.022 249.22 506.928 249.256 509.094H241.887ZM254.782 545.227V507.727H262.24V512.308H262.577C262.908 511.574 263.388 510.829 264.015 510.071C264.654 509.302 265.483 508.662 266.501 508.153C267.531 507.633 268.809 507.372 270.336 507.372C272.325 507.372 274.16 507.893 275.84 508.935C277.521 509.964 278.865 511.521 279.871 513.604C280.877 515.676 281.38 518.274 281.38 521.399C281.38 524.441 280.889 527.01 279.906 529.105C278.936 531.188 277.61 532.769 275.929 533.846C274.26 534.911 272.39 535.444 270.318 535.444C268.851 535.444 267.602 535.201 266.572 534.716C265.554 534.231 264.719 533.621 264.068 532.887C263.417 532.141 262.92 531.39 262.577 530.632H262.346V545.227H254.782ZM262.186 521.364C262.186 522.985 262.411 524.4 262.861 525.607C263.311 526.815 263.962 527.756 264.814 528.43C265.666 529.093 266.702 529.425 267.921 529.425C269.152 529.425 270.194 529.087 271.046 528.413C271.899 527.726 272.544 526.779 272.982 525.572C273.432 524.353 273.656 522.95 273.656 521.364C273.656 519.789 273.437 518.404 272.999 517.209C272.561 516.013 271.916 515.078 271.064 514.403C270.212 513.729 269.164 513.391 267.921 513.391C266.69 513.391 265.649 513.717 264.796 514.368C263.956 515.019 263.311 515.942 262.861 517.138C262.411 518.333 262.186 519.742 262.186 521.364ZM286.423 535V507.727H293.756V512.486H294.04C294.537 510.793 295.372 509.515 296.544 508.651C297.715 507.775 299.065 507.337 300.592 507.337C300.971 507.337 301.379 507.36 301.817 507.408C302.255 507.455 302.64 507.52 302.971 507.603V514.315C302.616 514.208 302.125 514.113 301.497 514.031C300.87 513.948 300.296 513.906 299.775 513.906C298.662 513.906 297.668 514.149 296.792 514.634C295.928 515.108 295.241 515.771 294.732 516.623C294.235 517.475 293.987 518.458 293.987 519.57V535H286.423ZM306.882 535V507.727H314.446V535H306.882ZM310.681 504.212C309.557 504.212 308.592 503.839 307.787 503.093C306.994 502.335 306.598 501.43 306.598 500.376C306.598 499.335 306.994 498.441 307.787 497.695C308.592 496.938 309.557 496.559 310.681 496.559C311.806 496.559 312.765 496.938 313.558 497.695C314.363 498.441 314.765 499.335 314.765 500.376C314.765 501.43 314.363 502.335 313.558 503.093C312.765 503.839 311.806 504.212 310.681 504.212ZM328.069 519.233V535H320.505V507.727H327.714V512.539H328.033C328.637 510.953 329.649 509.698 331.069 508.775C332.49 507.84 334.212 507.372 336.236 507.372C338.13 507.372 339.782 507.786 341.19 508.615C342.599 509.444 343.694 510.627 344.475 512.166C345.256 513.693 345.647 515.516 345.647 517.635V535H338.083V518.984C338.095 517.315 337.669 516.013 336.805 515.078C335.94 514.131 334.751 513.658 333.236 513.658C332.218 513.658 331.318 513.877 330.537 514.315C329.767 514.753 329.164 515.392 328.726 516.232C328.3 517.061 328.081 518.061 328.069 519.233ZM363.895 545.795C361.445 545.795 359.344 545.458 357.592 544.783C355.852 544.121 354.467 543.215 353.437 542.067C352.407 540.919 351.739 539.628 351.431 538.196L358.426 537.255C358.64 537.799 358.977 538.308 359.439 538.782C359.9 539.255 360.51 539.634 361.267 539.918C362.037 540.214 362.972 540.362 364.073 540.362C365.718 540.362 367.074 539.96 368.139 539.155C369.216 538.362 369.755 537.03 369.755 535.16V530.17H369.435C369.104 530.928 368.606 531.644 367.944 532.319C367.281 532.994 366.428 533.544 365.387 533.97C364.345 534.396 363.102 534.609 361.658 534.609C359.61 534.609 357.746 534.136 356.065 533.189C354.396 532.23 353.064 530.768 352.07 528.803C351.087 526.826 350.596 524.329 350.596 521.31C350.596 518.221 351.099 515.64 352.105 513.569C353.112 511.497 354.449 509.947 356.118 508.917C357.799 507.887 359.64 507.372 361.64 507.372C363.167 507.372 364.446 507.633 365.475 508.153C366.505 508.662 367.334 509.302 367.961 510.071C368.6 510.829 369.092 511.574 369.435 512.308H369.719V507.727H377.23V535.266C377.23 537.586 376.662 539.528 375.525 541.09C374.389 542.653 372.815 543.825 370.802 544.606C368.802 545.399 366.499 545.795 363.895 545.795ZM364.055 528.928C365.274 528.928 366.304 528.626 367.145 528.022C367.997 527.406 368.648 526.531 369.098 525.394C369.559 524.246 369.79 522.873 369.79 521.275C369.79 519.677 369.565 518.292 369.115 517.12C368.666 515.936 368.015 515.019 367.162 514.368C366.31 513.717 365.274 513.391 364.055 513.391C362.812 513.391 361.765 513.729 360.912 514.403C360.06 515.066 359.415 515.99 358.977 517.173C358.539 518.357 358.32 519.724 358.32 521.275C358.32 522.849 358.539 524.21 358.977 525.359C359.427 526.495 360.072 527.377 360.912 528.004C361.765 528.62 362.812 528.928 364.055 528.928Z"
          fill="white"
        />
        <path d="M314 142L494.999 169H133.001L314 142Z" fill="white" />
        <path d="M314 435L133.001 408L494.999 408L314 435Z" fill="white" />
        <rect x="314" y="109" width="209" height="360" fill="#B97059" />
        <rect
          x="269.5"
          y="170.5"
          width="178"
          height="236"
          rx="8.5"
          fill="#B97059"
          stroke="white"
          stroke-width="3"
        />
        <rect x="133" y="169" width="181" height="239" fill="white" />
        <path
          d="M264.159 251.909C263.307 244.712 259.85 239.125 253.79 235.148C247.729 231.17 240.295 229.182 231.489 229.182C225.049 229.182 219.415 230.223 214.585 232.307C209.803 234.39 206.063 237.255 203.364 240.901C200.712 244.546 199.386 248.689 199.386 253.33C199.386 257.212 200.31 260.55 202.156 263.344C204.05 266.09 206.465 268.386 209.401 270.233C212.336 272.032 215.414 273.524 218.634 274.707C221.853 275.844 224.812 276.767 227.511 277.477L242.284 281.455C246.072 282.449 250.286 283.822 254.926 285.574C259.614 287.326 264.088 289.717 268.349 292.747C272.658 295.73 276.209 299.565 279.003 304.253C281.796 308.94 283.193 314.693 283.193 321.511C283.193 329.371 281.134 336.473 277.014 342.818C272.942 349.163 266.976 354.205 259.116 357.946C251.304 361.687 241.811 363.557 230.636 363.557C220.22 363.557 211.2 361.876 203.577 358.514C196.001 355.152 190.035 350.465 185.679 344.452C181.37 338.438 178.932 331.455 178.364 323.5H196.545C197.019 328.992 198.866 333.538 202.085 337.136C205.352 340.687 209.472 343.339 214.443 345.091C219.462 346.795 224.86 347.648 230.636 347.648C237.36 347.648 243.397 346.559 248.747 344.381C254.098 342.155 258.335 339.078 261.46 335.148C264.585 331.17 266.148 326.53 266.148 321.227C266.148 316.398 264.798 312.468 262.099 309.438C259.401 306.407 255.849 303.945 251.446 302.051C247.043 300.157 242.284 298.5 237.17 297.08L219.273 291.966C207.909 288.699 198.913 284.035 192.284 277.974C185.655 271.914 182.341 263.983 182.341 254.182C182.341 246.038 184.543 238.936 188.946 232.875C193.397 226.767 199.363 222.032 206.844 218.67C214.372 215.261 222.777 213.557 232.057 213.557C241.432 213.557 249.765 215.238 257.057 218.599C264.348 221.914 270.125 226.459 274.386 232.236C278.695 238.012 280.968 244.57 281.205 251.909H264.159Z"
          fill="#B97059"
        />
        <ellipse cx="380.5" cy="289" rx="48.5" ry="51" fill="white" />
        <path
          d="M395 274.526C360.8 282.737 352.82 308.066 344.916 329.291L352.098 332L355.708 322.558C357.532 323.256 359.432 323.789 360.8 323.789C402.6 323.789 414 254 414 254C410.2 262.211 383.6 263.237 364.6 267.342C345.6 271.447 338 288.895 338 297.105C338 305.316 344.65 312.5 344.65 312.5C357 274.526 395 274.526 395 274.526Z"
          fill="#B97059"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
