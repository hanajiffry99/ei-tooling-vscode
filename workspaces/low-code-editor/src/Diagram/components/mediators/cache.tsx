/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";
import { Circle, Square } from "@wso2-ei/low-code-diagram";

interface SquareProps {
  model: Square;
}

export function Cache(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;

  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.tag, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.w}
        height={viewState.bBox.h}
        viewBox="0 0 800 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect width="800" height="600" fill="#C0C0C0" />
        <rect x="480" y="10" width="310" height="580" fill="#A9A9A9" />
        <path d="M10 10H430V590H10V10Z" fill="#008234" />
        <path d="M468 299.5L439.5 335.44V263.56L468 299.5Z" fill="#71797E" />
        <path
          d="M177.196 493.094H170.974C170.861 492.289 170.629 491.574 170.278 490.949C169.928 490.314 169.478 489.775 168.929 489.33C168.38 488.884 167.745 488.544 167.026 488.307C166.315 488.07 165.544 487.952 164.71 487.952C163.205 487.952 161.893 488.326 160.776 489.074C159.658 489.812 158.792 490.892 158.176 492.312C157.561 493.723 157.253 495.437 157.253 497.455C157.253 499.528 157.561 501.271 158.176 502.682C158.801 504.093 159.672 505.158 160.79 505.878C161.907 506.598 163.2 506.957 164.668 506.957C165.491 506.957 166.254 506.848 166.955 506.631C167.665 506.413 168.295 506.096 168.844 505.679C169.393 505.253 169.848 504.737 170.207 504.131C170.577 503.525 170.832 502.833 170.974 502.057L177.196 502.085C177.035 503.42 176.633 504.708 175.989 505.949C175.354 507.18 174.497 508.283 173.418 509.259C172.348 510.224 171.069 510.991 169.582 511.56C168.105 512.118 166.434 512.398 164.568 512.398C161.973 512.398 159.653 511.811 157.608 510.636C155.572 509.462 153.962 507.762 152.778 505.537C151.604 503.312 151.017 500.617 151.017 497.455C151.017 494.282 151.614 491.583 152.807 489.358C154 487.133 155.619 485.437 157.665 484.273C159.71 483.098 162.011 482.511 164.568 482.511C166.254 482.511 167.816 482.748 169.256 483.222C170.705 483.695 171.988 484.386 173.105 485.295C174.223 486.195 175.132 487.298 175.832 488.605C176.543 489.912 176.997 491.408 177.196 493.094ZM187.714 512.412C186.322 512.412 185.082 512.17 183.993 511.688C182.904 511.195 182.042 510.471 181.408 509.514C180.783 508.548 180.47 507.346 180.47 505.906C180.47 504.694 180.693 503.676 181.138 502.852C181.583 502.028 182.189 501.366 182.956 500.864C183.723 500.362 184.594 499.983 185.57 499.727C186.554 499.472 187.587 499.292 188.666 499.188C189.935 499.055 190.958 498.932 191.734 498.818C192.511 498.695 193.074 498.515 193.425 498.278C193.775 498.042 193.95 497.691 193.95 497.227V497.142C193.95 496.242 193.666 495.546 193.098 495.054C192.539 494.562 191.744 494.315 190.712 494.315C189.623 494.315 188.756 494.557 188.112 495.04C187.468 495.513 187.042 496.11 186.834 496.83L181.237 496.375C181.521 495.049 182.08 493.903 182.913 492.938C183.747 491.962 184.821 491.214 186.138 490.693C187.464 490.163 188.998 489.898 190.74 489.898C191.952 489.898 193.112 490.04 194.22 490.324C195.338 490.608 196.327 491.048 197.189 491.645C198.06 492.241 198.747 493.009 199.249 493.946C199.75 494.874 200.001 495.987 200.001 497.284V512H194.263V508.974H194.092C193.742 509.656 193.273 510.258 192.686 510.778C192.099 511.29 191.393 511.692 190.57 511.986C189.746 512.27 188.794 512.412 187.714 512.412ZM189.447 508.236C190.338 508.236 191.124 508.061 191.805 507.71C192.487 507.35 193.022 506.867 193.411 506.261C193.799 505.655 193.993 504.969 193.993 504.202V501.886C193.804 502.009 193.543 502.123 193.212 502.227C192.89 502.322 192.525 502.412 192.118 502.497C191.711 502.573 191.304 502.644 190.896 502.71C190.489 502.767 190.12 502.819 189.788 502.866C189.078 502.971 188.458 503.136 187.928 503.364C187.397 503.591 186.985 503.899 186.692 504.287C186.398 504.666 186.251 505.139 186.251 505.707C186.251 506.531 186.55 507.161 187.146 507.597C187.752 508.023 188.519 508.236 189.447 508.236ZM214.554 512.426C212.319 512.426 210.397 511.953 208.787 511.006C207.187 510.049 205.955 508.723 205.094 507.028C204.241 505.333 203.815 503.383 203.815 501.176C203.815 498.941 204.246 496.981 205.108 495.295C205.979 493.6 207.215 492.279 208.815 491.332C210.416 490.376 212.319 489.898 214.526 489.898C216.429 489.898 218.096 490.243 219.526 490.935C220.955 491.626 222.087 492.597 222.92 493.847C223.754 495.097 224.213 496.564 224.298 498.25H218.588C218.427 497.161 218.001 496.285 217.31 495.622C216.628 494.95 215.733 494.614 214.625 494.614C213.688 494.614 212.868 494.869 212.168 495.381C211.476 495.883 210.937 496.616 210.548 497.582C210.16 498.548 209.966 499.718 209.966 501.091C209.966 502.483 210.155 503.667 210.534 504.642C210.922 505.617 211.467 506.361 212.168 506.872C212.868 507.384 213.688 507.639 214.625 507.639C215.316 507.639 215.937 507.497 216.486 507.213C217.045 506.929 217.504 506.517 217.864 505.977C218.233 505.428 218.474 504.77 218.588 504.003H224.298C224.204 505.67 223.749 507.137 222.935 508.406C222.13 509.666 221.017 510.651 219.597 511.361C218.176 512.071 216.495 512.426 214.554 512.426ZM234.224 499.386V512H228.173V482.909H234.053V494.031H234.309C234.801 492.743 235.597 491.735 236.695 491.006C237.794 490.267 239.172 489.898 240.829 489.898C242.344 489.898 243.665 490.229 244.792 490.892C245.928 491.545 246.809 492.488 247.434 493.719C248.068 494.94 248.381 496.403 248.371 498.108V512H242.32V499.188C242.33 497.843 241.989 496.796 241.298 496.048C240.616 495.3 239.659 494.926 238.428 494.926C237.604 494.926 236.875 495.101 236.241 495.452C235.616 495.802 235.123 496.313 234.763 496.986C234.413 497.649 234.233 498.449 234.224 499.386ZM263.077 512.426C260.832 512.426 258.901 511.972 257.281 511.062C255.671 510.144 254.431 508.847 253.56 507.17C252.688 505.485 252.253 503.491 252.253 501.19C252.253 498.946 252.688 496.976 253.56 495.281C254.431 493.586 255.657 492.265 257.239 491.318C258.83 490.371 260.695 489.898 262.835 489.898C264.275 489.898 265.615 490.13 266.855 490.594C268.105 491.048 269.194 491.735 270.122 492.653C271.06 493.572 271.789 494.727 272.31 496.119C272.83 497.502 273.091 499.121 273.091 500.977V502.639H254.668V498.889H267.395C267.395 498.018 267.205 497.246 266.827 496.574C266.448 495.902 265.922 495.376 265.25 494.997C264.587 494.609 263.815 494.415 262.935 494.415C262.016 494.415 261.202 494.628 260.491 495.054C259.791 495.471 259.241 496.034 258.844 496.744C258.446 497.445 258.242 498.226 258.233 499.088V502.653C258.233 503.733 258.432 504.666 258.83 505.452C259.237 506.238 259.81 506.844 260.548 507.27C261.287 507.696 262.163 507.909 263.176 507.909C263.848 507.909 264.464 507.814 265.023 507.625C265.581 507.436 266.06 507.152 266.457 506.773C266.855 506.394 267.158 505.93 267.366 505.381L272.963 505.75C272.679 507.095 272.097 508.269 271.216 509.273C270.345 510.267 269.218 511.044 267.835 511.602C266.462 512.152 264.876 512.426 263.077 512.426Z"
          fill="white"
        />
        <path
          d="M194.631 223.08V241.9H127V223.08H194.631ZM194.631 270.13V288.95H127V270.13H194.631ZM281.586 317.18V336H127V317.18H281.586ZM294.242 274.835C298.493 268.436 300.909 260.72 300.909 252.345C300.909 228.82 281.586 210 257.432 210C233.278 210 213.954 228.82 213.954 252.345C213.954 275.87 233.278 294.69 257.432 294.69C265.837 294.69 273.76 292.338 280.426 288.291L310.57 317.18L324 304.1L294.242 274.835ZM257.432 275.87C244.099 275.87 233.278 265.425 233.278 252.345C233.278 239.265 244.099 228.82 257.432 228.82C270.765 228.82 281.586 239.359 281.586 252.345C281.586 265.331 270.765 275.87 257.432 275.87Z"
          fill="white"
        />
        <rect x="112" y="217" width="100" height="27" fill="#008234" />
        <path
          d="M199 190.8H201.5V188.3V183V180.5H199H132H129.5V183V188.3V190.8H132H159.65V220.685L145.276 209.315L143.73 208.092L142.181 209.309L137.424 213.046L134.93 215.005L137.417 216.973L163.949 237.961L165.5 239.188L167.051 237.961L193.583 216.973L196.07 215.005L193.576 213.046L188.819 209.309L187.27 208.092L185.724 209.315L171.35 220.685V190.8H199Z"
          fill="white"
          stroke="white"
          stroke-width="5"
        />
        <rect x="127" y="246" width="67" height="19" fill="white" />
        <rect x="127" y="175" width="197" height="19" fill="white" />
        <rect x="127" y="293" width="101" height="19" fill="white" />
        <rect x="127" y="341" width="176" height="19" fill="white" />
        <circle cx="294" cy="330" r="35" fill="#008234" />
        <path
          d="M264 330C264 326.06 264.776 322.159 266.284 318.519C267.791 314.88 270.001 311.573 272.787 308.787C278.413 303.161 286.044 300 294 300C301.956 300 309.587 303.161 315.213 308.787C320.839 314.413 324 322.044 324 330C324 333.94 323.224 337.841 321.716 341.481C320.209 345.12 317.999 348.427 315.213 351.213C312.427 353.999 309.12 356.209 305.481 357.716C301.841 359.224 297.94 360 294 360C286.044 360 278.413 356.839 272.787 351.213C267.161 345.587 264 337.956 264 330ZM309 330L294 315V324H282V336H294V345L309 330Z"
          fill="white"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
      {/*<NameComponent model={model} />*/}
    </>
  );
}
