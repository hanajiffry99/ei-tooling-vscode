/**
 * Copyright (c) 2023, WSO2 LLC. (http://www.wso2.org) All Rights Reserved.
 *
 * WSO2 Inc. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 */

import React from "react";
import { Circle } from "@wso2-ei/low-code-diagram";
import { getComponent } from "../../util";
import { WorkerLine } from "../worker-line";

interface SquareProps {
  model: Circle;
}

export function JsonTransform(props: SquareProps) {
  const { model } = props;

  const viewState = model.viewState;
  const components: JSX.Element[] = [];

  model.children.forEach((child) => {
    components.push(getComponent(child.type, { model: child }));
  });

  return (
    <>
      <svg
        x={viewState.bBox.x}
        y={viewState.bBox.y}
        width={viewState.bBox.r * 2}
        height={viewState.bBox.r * 2}
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="300" cy="300" r="300" fill="#644A9B" />
        <path
          d="M161.176 483.909H167.256V504.193C167.256 506.068 166.834 507.697 165.991 509.08C165.158 510.462 163.998 511.527 162.511 512.276C161.025 513.024 159.296 513.398 157.327 513.398C155.575 513.398 153.984 513.09 152.554 512.474C151.134 511.849 150.007 510.902 149.173 509.634C148.34 508.355 147.928 506.75 147.938 504.818H154.06C154.079 505.585 154.235 506.243 154.528 506.793C154.831 507.332 155.243 507.749 155.764 508.043C156.295 508.327 156.92 508.469 157.639 508.469C158.397 508.469 159.036 508.308 159.557 507.986C160.087 507.654 160.49 507.171 160.764 506.537C161.039 505.902 161.176 505.121 161.176 504.193V483.909ZM188.122 492.276C188.009 491.13 187.521 490.24 186.659 489.605C185.797 488.971 184.628 488.653 183.151 488.653C182.147 488.653 181.299 488.795 180.608 489.08C179.917 489.354 179.386 489.738 179.017 490.23C178.657 490.723 178.477 491.281 178.477 491.906C178.458 492.427 178.567 492.882 178.804 493.27C179.05 493.658 179.386 493.994 179.812 494.278C180.239 494.553 180.731 494.795 181.29 495.003C181.848 495.202 182.445 495.372 183.08 495.514L185.693 496.139C186.962 496.423 188.127 496.802 189.188 497.276C190.248 497.749 191.167 498.331 191.943 499.023C192.72 499.714 193.321 500.528 193.747 501.466C194.183 502.403 194.405 503.478 194.415 504.69C194.405 506.471 193.951 508.014 193.051 509.321C192.161 510.618 190.873 511.627 189.188 512.347C187.511 513.057 185.49 513.412 183.122 513.412C180.774 513.412 178.728 513.052 176.986 512.332C175.253 511.613 173.899 510.547 172.923 509.136C171.957 507.716 171.451 505.959 171.403 503.866H177.355C177.421 504.842 177.701 505.656 178.193 506.31C178.695 506.954 179.363 507.441 180.196 507.773C181.039 508.095 181.991 508.256 183.051 508.256C184.093 508.256 184.997 508.104 185.764 507.801C186.541 507.498 187.142 507.077 187.568 506.537C187.994 505.997 188.207 505.377 188.207 504.676C188.207 504.023 188.013 503.473 187.625 503.028C187.246 502.583 186.688 502.205 185.949 501.892C185.22 501.58 184.325 501.295 183.264 501.04L180.097 500.244C177.644 499.648 175.707 498.715 174.287 497.446C172.866 496.177 172.161 494.468 172.17 492.318C172.161 490.557 172.63 489.018 173.577 487.702C174.533 486.385 175.845 485.358 177.511 484.619C179.178 483.881 181.072 483.511 183.193 483.511C185.352 483.511 187.237 483.881 188.847 484.619C190.466 485.358 191.725 486.385 192.625 487.702C193.525 489.018 193.989 490.543 194.017 492.276H188.122ZM225.285 498.455C225.285 501.627 224.683 504.326 223.481 506.551C222.288 508.777 220.659 510.476 218.594 511.651C216.54 512.815 214.229 513.398 211.663 513.398C209.077 513.398 206.757 512.811 204.702 511.636C202.647 510.462 201.023 508.762 199.83 506.537C198.637 504.312 198.04 501.617 198.04 498.455C198.04 495.282 198.637 492.583 199.83 490.358C201.023 488.133 202.647 486.437 204.702 485.273C206.757 484.098 209.077 483.511 211.663 483.511C214.229 483.511 216.54 484.098 218.594 485.273C220.659 486.437 222.288 488.133 223.481 490.358C224.683 492.583 225.285 495.282 225.285 498.455ZM219.049 498.455C219.049 496.4 218.741 494.667 218.126 493.256C217.52 491.845 216.663 490.775 215.555 490.045C214.447 489.316 213.149 488.952 211.663 488.952C210.176 488.952 208.879 489.316 207.771 490.045C206.663 490.775 205.801 491.845 205.185 493.256C204.579 494.667 204.276 496.4 204.276 498.455C204.276 500.509 204.579 502.242 205.185 503.653C205.801 505.064 206.663 506.134 207.771 506.864C208.879 507.593 210.176 507.957 211.663 507.957C213.149 507.957 214.447 507.593 215.555 506.864C216.663 506.134 217.52 505.064 218.126 503.653C218.741 502.242 219.049 500.509 219.049 498.455ZM254.173 483.909V513H248.861L236.205 494.69H235.991V513H229.841V483.909H235.239L247.795 502.205H248.051V483.909H254.173ZM267.405 488.98V483.909H291.297V488.98H282.391V513H276.311V488.98H267.405ZM292.852 513V491.182H298.719V494.989H298.946C299.344 493.634 300.011 492.612 300.949 491.92C301.886 491.22 302.966 490.869 304.188 490.869C304.491 490.869 304.817 490.888 305.168 490.926C305.518 490.964 305.826 491.016 306.091 491.082V496.452C305.807 496.366 305.414 496.291 304.912 496.224C304.41 496.158 303.951 496.125 303.534 496.125C302.644 496.125 301.848 496.319 301.148 496.707C300.456 497.086 299.907 497.616 299.5 498.298C299.102 498.98 298.903 499.766 298.903 500.656V513H292.852ZM314.816 513.412C313.424 513.412 312.183 513.17 311.094 512.688C310.005 512.195 309.144 511.471 308.509 510.514C307.884 509.548 307.572 508.346 307.572 506.906C307.572 505.694 307.794 504.676 308.239 503.852C308.684 503.028 309.29 502.366 310.058 501.864C310.825 501.362 311.696 500.983 312.671 500.727C313.656 500.472 314.688 500.292 315.768 500.188C317.037 500.055 318.059 499.932 318.836 499.818C319.612 499.695 320.176 499.515 320.526 499.278C320.877 499.042 321.052 498.691 321.052 498.227V498.142C321.052 497.242 320.768 496.546 320.2 496.054C319.641 495.562 318.845 495.315 317.813 495.315C316.724 495.315 315.858 495.557 315.214 496.04C314.57 496.513 314.144 497.11 313.935 497.83L308.339 497.375C308.623 496.049 309.182 494.903 310.015 493.938C310.848 492.962 311.923 492.214 313.239 491.693C314.565 491.163 316.099 490.898 317.842 490.898C319.054 490.898 320.214 491.04 321.322 491.324C322.439 491.608 323.429 492.048 324.29 492.645C325.162 493.241 325.848 494.009 326.35 494.946C326.852 495.874 327.103 496.987 327.103 498.284V513H321.364V509.974H321.194C320.844 510.656 320.375 511.258 319.788 511.778C319.201 512.29 318.495 512.692 317.671 512.986C316.847 513.27 315.896 513.412 314.816 513.412ZM316.549 509.236C317.439 509.236 318.225 509.061 318.907 508.71C319.589 508.35 320.124 507.867 320.512 507.261C320.9 506.655 321.094 505.969 321.094 505.202V502.886C320.905 503.009 320.645 503.123 320.313 503.227C319.991 503.322 319.627 503.412 319.219 503.497C318.812 503.573 318.405 503.644 317.998 503.71C317.591 503.767 317.221 503.819 316.89 503.866C316.18 503.971 315.559 504.136 315.029 504.364C314.499 504.591 314.087 504.899 313.793 505.287C313.5 505.666 313.353 506.139 313.353 506.707C313.353 507.531 313.651 508.161 314.248 508.597C314.854 509.023 315.621 509.236 316.549 509.236ZM337.849 500.386V513H331.798V491.182H337.565V495.031H337.82C338.303 493.762 339.113 492.759 340.249 492.02C341.386 491.272 342.763 490.898 344.383 490.898C345.898 490.898 347.219 491.229 348.346 491.892C349.473 492.555 350.349 493.502 350.974 494.733C351.599 495.955 351.911 497.413 351.911 499.108V513H345.86V500.188C345.87 498.852 345.529 497.811 344.837 497.062C344.146 496.305 343.194 495.926 341.982 495.926C341.168 495.926 340.448 496.101 339.823 496.452C339.208 496.802 338.725 497.313 338.374 497.986C338.033 498.649 337.858 499.449 337.849 500.386ZM374.834 497.403L369.294 497.744C369.199 497.271 368.996 496.845 368.683 496.466C368.371 496.078 367.959 495.77 367.447 495.543C366.946 495.306 366.344 495.188 365.643 495.188C364.706 495.188 363.915 495.386 363.271 495.784C362.627 496.172 362.305 496.693 362.305 497.347C362.305 497.867 362.514 498.308 362.93 498.668C363.347 499.027 364.062 499.316 365.075 499.534L369.024 500.33C371.145 500.765 372.727 501.466 373.768 502.432C374.81 503.398 375.331 504.667 375.331 506.239C375.331 507.669 374.91 508.923 374.067 510.003C373.233 511.082 372.088 511.925 370.629 512.531C369.18 513.128 367.509 513.426 365.615 513.426C362.727 513.426 360.426 512.825 358.712 511.622C357.007 510.41 356.008 508.762 355.714 506.679L361.666 506.366C361.846 507.247 362.282 507.92 362.973 508.384C363.664 508.838 364.55 509.065 365.629 509.065C366.69 509.065 367.542 508.862 368.186 508.455C368.839 508.038 369.171 507.503 369.18 506.849C369.171 506.3 368.939 505.85 368.484 505.5C368.03 505.14 367.329 504.866 366.382 504.676L362.604 503.923C360.473 503.497 358.887 502.759 357.845 501.707C356.813 500.656 356.297 499.316 356.297 497.688C356.297 496.286 356.676 495.079 357.433 494.065C358.2 493.052 359.275 492.271 360.658 491.722C362.05 491.172 363.679 490.898 365.544 490.898C368.3 490.898 370.468 491.48 372.05 492.645C373.641 493.81 374.569 495.396 374.834 497.403ZM390.874 491.182V495.727H377.408V491.182H390.874ZM380.491 513V489.605C380.491 488.024 380.799 486.712 381.414 485.67C382.039 484.629 382.891 483.848 383.971 483.327C385.05 482.806 386.277 482.545 387.65 482.545C388.578 482.545 389.425 482.616 390.192 482.759C390.969 482.901 391.547 483.028 391.925 483.142L390.846 487.688C390.609 487.612 390.316 487.541 389.965 487.474C389.624 487.408 389.274 487.375 388.914 487.375C388.024 487.375 387.404 487.583 387.053 488C386.703 488.407 386.528 488.98 386.528 489.719V513H380.491ZM403.648 513.426C401.441 513.426 399.533 512.957 397.923 512.02C396.323 511.073 395.087 509.757 394.216 508.071C393.345 506.376 392.909 504.411 392.909 502.176C392.909 499.922 393.345 497.953 394.216 496.267C395.087 494.572 396.323 493.256 397.923 492.318C399.533 491.371 401.441 490.898 403.648 490.898C405.854 490.898 407.758 491.371 409.358 492.318C410.968 493.256 412.208 494.572 413.08 496.267C413.951 497.953 414.386 499.922 414.386 502.176C414.386 504.411 413.951 506.376 413.08 508.071C412.208 509.757 410.968 511.073 409.358 512.02C407.758 512.957 405.854 513.426 403.648 513.426ZM403.676 508.739C404.68 508.739 405.518 508.455 406.19 507.886C406.863 507.309 407.369 506.523 407.71 505.528C408.061 504.534 408.236 503.402 408.236 502.134C408.236 500.865 408.061 499.733 407.71 498.739C407.369 497.744 406.863 496.958 406.19 496.381C405.518 495.803 404.68 495.514 403.676 495.514C402.663 495.514 401.811 495.803 401.119 496.381C400.438 496.958 399.921 497.744 399.571 498.739C399.23 499.733 399.06 500.865 399.06 502.134C399.06 503.402 399.23 504.534 399.571 505.528C399.921 506.523 400.438 507.309 401.119 507.886C401.811 508.455 402.663 508.739 403.676 508.739ZM418.321 513V491.182H424.188V494.989H424.415C424.813 493.634 425.48 492.612 426.418 491.92C427.355 491.22 428.435 490.869 429.656 490.869C429.959 490.869 430.286 490.888 430.636 490.926C430.987 490.964 431.295 491.016 431.56 491.082V496.452C431.276 496.366 430.883 496.291 430.381 496.224C429.879 496.158 429.42 496.125 429.003 496.125C428.113 496.125 427.317 496.319 426.616 496.707C425.925 497.086 425.376 497.616 424.969 498.298C424.571 498.98 424.372 499.766 424.372 500.656V513H418.321ZM434.688 513V491.182H440.455V495.031H440.711C441.165 493.753 441.923 492.744 442.984 492.006C444.044 491.267 445.313 490.898 446.79 490.898C448.287 490.898 449.56 491.272 450.612 492.02C451.663 492.759 452.363 493.762 452.714 495.031H452.941C453.386 493.781 454.191 492.782 455.356 492.034C456.53 491.277 457.917 490.898 459.518 490.898C461.554 490.898 463.206 491.546 464.475 492.844C465.754 494.132 466.393 495.959 466.393 498.327V513H460.356V499.52C460.356 498.308 460.034 497.399 459.39 496.793C458.746 496.187 457.941 495.884 456.975 495.884C455.877 495.884 455.02 496.234 454.404 496.935C453.789 497.626 453.481 498.54 453.481 499.676V513H447.614V499.392C447.614 498.322 447.307 497.47 446.691 496.835C446.085 496.201 445.285 495.884 444.29 495.884C443.618 495.884 443.012 496.054 442.472 496.395C441.942 496.726 441.521 497.195 441.208 497.801C440.896 498.398 440.739 499.098 440.739 499.903V513H434.688Z"
          fill="white"
        />
        <rect
          x="132"
          y="149"
          width="336"
          height="253"
          rx="37"
          fill="#644A9B"
          stroke="white"
          stroke-width="6"
        />
        <rect
          x="232.229"
          y="200.225"
          width="24.5343"
          height="151.585"
          rx="10"
          fill="white"
        />
        <rect
          x="232.229"
          y="351.81"
          width="22.9225"
          height="205.771"
          rx="10"
          transform="rotate(-90 232.229 351.81)"
          fill="white"
        />
        <rect
          x="342.237"
          y="220.19"
          width="24.5343"
          height="151.585"
          rx="10"
          fill="white"
        />
        <rect
          x="161"
          y="243.113"
          width="22.9225"
          height="205.771"
          rx="10"
          transform="rotate(-90 161 243.113)"
          fill="white"
        />
        <path
          d="M244.891 181L277.105 206.511H212.678L244.891 181Z"
          fill="white"
        />
        <path d="M354.9 391L322.686 365.489H387.114L354.9 391Z" fill="white" />
        <rect
          x="256.763"
          y="220.19"
          width="8.70571"
          height="22.9225"
          fill="#644A9B"
        />
        <rect
          x="342.237"
          y="328.887"
          width="8.1338"
          height="24.5343"
          transform="rotate(-90 342.237 328.887)"
          fill="#644A9B"
        />
      </svg>

      <WorkerLine model={model} />
      {components}
    </>
  );
}
